<div metal:use-macro="layout.base" i18n:domain="onegov.wtfs">
    <tal:block metal:fill-slot="title">${layout.title}</tal:block>
    <tal:block metal:fill-slot="content">
        <div class="row">
            <div class="columns small-12">
                <h1>${layout.title}<br><small>${layout.subtitle}</small></h1>
                <p tal:condition="not: results" i18n:translate="">No results found</p>
                <table tal:condition="results">
                    <thead tal:define="year_headers layout.model.year_dict">
                        <tr>
                            <th colspan="2"></th>
                            <th class="center" colspan="${len(year_headers) + 3}" i18n:translate>Dispatch to the tax office</th>
                        </tr>
                        <tr>
                            <th class="center" colspan="2" i18n:translate>Municipality</th>
                            <th class="right" i18n:translate>Out</th>
                            <th class="center" colspan="${len(year_headers) + 1}" i18n:translate>Tax forms</th>
                            <th class="right" i18n:translate>Single documents</th>
                        </tr>
                        <tr>
                            <th class="subtitle" i18n:translate>Name</th>
                            <th class="right subtitle" i18n:translate>BFS number</th>
                            <th class="right subtitle" i18n:translate>Boxes</th>
                            <tal:b tal:repeat="header year_headers">
                                <th class="right subtitle">${layout.translate_key(header)}</th>
                            </tal:b>
                            <th class="right subtitle" i18n:translate>Total</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="result results">
                            <td>${result.name}</td>
                            <td class="right">${result.bfs_number}</td>
                            <td class="right">${result.return_boxes}</td>
                            <tal:b tal:repeat="summed result.return_scanned_tax_forms_by_year.values()">
                                <td class="right">${summed}</td>
                            </tal:b>
                            <td class="right">${result.return_scanned_tax_forms}</td>
                            <td class="right">${result.return_scanned_single_documents}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="2" i18n:translate>Total</th>
                            <td class="right">${total.return_boxes}</td>
                            <tal:b tal:repeat="summed total.return_scanned_tax_forms_by_year.values()">
                                <td class="right">${summed}</td>
                            </tal:b>
                            <td class="right">${total.return_scanned_tax_forms}</td>
                            <td class="right">${total.return_scanned_single_documents}</td>
                        </tr>
                    </tfoot>
                </table>

            </div>
        </div>
    </tal:block>
</div>
