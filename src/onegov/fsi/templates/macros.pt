<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="onegov.fsi">

<body>

<metal:intercooler_btn define-macro="intercooler_btn">
    <tal:b tal:define="link intercooler_btn|layout.intercooler_btn" tal:condition="link" tal:content="structure link(layout)" />
</metal:intercooler_btn>

<metal:intercooler_btn_for_item define-macro="intercooler_btn_for_item">
    <tal:b tal:define="link intercooler_btn_for_item|layout.intercooler_btn_for_item" tal:condition="link and item" tal:content="structure link(item)(layout)" />
</metal:intercooler_btn_for_item>

<metal:accordion define-macro="accordion">
    <tal:b tal:condition="items|nothing">
        <dl class="accordion" data-accordion>
            <tal:b tal:repeat="item items" define="accordion_id 'accordion-panel-{}'.format(repeat.item.number)">
                <dd class="accordion-navigation">
                    <a href="${accordion_id}">$item.title</a>
                    <div id="${accordion_id}" class="content">
                        <span tal:condition="item.url|nothing"><a href="${item.url}" class="tiny button hollow">Details</a></span>
                        <span tal:condition="request.is_manager and item.edit_url|nothing"><a href="${item.edit_url}" class="tiny button hollow">Edit</a></span>
                            ${item.content}
                    </div>
                </dd>
            </tal:b>
        </dl>

    </tal:b>
</metal:accordion>

<metal:email_preview define-macro="email_preview">
    <tal:b tal:condition="email|layout.model|nothing" tal:define="mail email|layout.model">
        <dl class="field-display">
            <dt i18n:translate="">Subject: </dt>
            <dd>${mail.subject}</dd>
            <div class="clearfix"></div>
        </dl>
        <dl class="field-display">
            <dt i18n:translate="">Text: </dt>
            <iframe src="${iframe_link|request.link(mail, name='embed')}" frameborder="0" width="100%" height="600px"></iframe>
            <div class="clearfix"></div>
        </dl>
    </tal:b>
</metal:email_preview>

<metal:email_recipients define-macro="email_recipients">
    <tal:b tal:condition="layout.model|nothing">
        <dl class="field-display">
            <dt i18n:translate="">Recipients: </dt>
            <dd>
                <tal:b tal:repeat="email layout.model.course_event.email_recipients">
                    ${email}<br>
                </tal:b>
            </dd>
            <div class="clearfix"></div>
        </dl>
    </tal:b>
</metal:email_recipients>

<metal:confirmation_slider define-macro="confirmation_slider" tal:define="completed reservation.event_completed">
    <div tal:condition="not: reservation.is_placeholder" tal:attributes="class python: 'switch round tiny confirmation-switch' + (' print-checked' if completed else ' print-unchecked')">
        <input id="${switch_id}" type="checkbox" tal:attributes="disabled python:not reservation.course_event.is_past or not request.is_admin; checked completed; ic-post-to url|nothing">
        <label for="${switch_id}"></label>
    </div>
</metal:confirmation_slider>

<metal:course_event define-macro="course_event_details">
    <p tal:condition="request.is_manager and model.hidden_from_public and not for_email|False">This course is hidden.</p>

    <dl class="field-display" tal:condition="for_email|False">
        <dt i18n:translate="">Name</dt>
        <dd>${model.course.name}</dd>
        <div class="clearfix"></div>
    </dl>

    <dl class="field-display">
        <dt i18n:translate="">Location</dt>
        <dd>${model.location}</dd>
        <div class="clearfix"></div>
    </dl>

    <dl class="field-display">
        <dt i18n:translate="">Date</dt>
        <dd>${layout.format_date(model.start, 'event')}, ${layout.format_date(model.start, 'time')} - ${layout.format_date(model.end, 'time')}</dd>
        <div class="clearfix"></div>
    </dl>

    <dl class="field-display">
        <dt i18n:translate="">Presenter</dt>
        <dd>${model.presenter_name}, ${model.presenter_email}</dd>
        <div class="clearfix"></div>
    </dl>

    <dl class="field-display" tal:condition="not: for_email|False">
        <dt i18n:translate="">Attendees</dt>
        <dd>min. ${model.min_attendees} max. ${model.max_attendees}</dd>
        <div class="clearfix"></div>
    </dl>

    <dl class="field-display" tal:condition="not: for_email|False">
        <dt i18n:translate="">Remaining seats</dt>
        <dd>${model.available_seats}</dd>
        <div class="clearfix"></div>
    </dl>

      <dl class="field-display" tal:condition="not: for_email|False">
        <dt i18n:translate="">Status</dt>
        <dd>${layout.format_status(model.status)}</dd>
        <div class="clearfix"></div>
    </dl>
</metal:course_event>

<metal:course define-macro="course_details">
    <h3 i18n:translate="">Description:</h3>
    <div class="page-text">
        <p tal:content="structure model.description_html"></p>
    </div>
</metal:course>

<metal:course_event_listing define-macro="course_event_listing">
    <tal:b tal:switch="events and True or False" tal:define="for_email for_email|False">
        <tal:b tal:case="True">
            <tal:b tal:condition="events">
                <table class="tablesaw hover events-table">
                    <thead>
                        <th i18n:translate class='text-left'>Date</th>
                        <th i18n:translate class='text-left'>Start</th>
                        <th i18n:translate class='text-left'>End</th>
                        <th i18n:translate class='text-left'>Presenter</th>
                        <th i18n:translate class='text-left' tal:condition="not for_email">Presenter Company</th>
                        <th i18n:translate class='text-left'>Free Space</th>
                        <th tal:condition="not for_email and request.is_manager" i18n:translate>Hidden</th>
                    </thead>
                    <tbody>
                        <tal:b tal:repeat="event events">
                            <tr>
                                <td>
                                    <a href="${request.link(event)}">
                                        <strong>${layout.format_date(event.start, 'date_long')}</strong>
                                    </a>
                                </td>
                                <td>${layout.format_date(event.start, 'time')}</td>
                                <td>${layout.format_date(event.end, 'time')}</td>
                                <td>${event.presenter_name}</td>
                                <td tal:condition="not for_email">${event.presenter_company}</td>
                                <td>${event.available_seats}</td>
                                <tal:b tal:condition="request.is_manager and not for_email" tal:switch="event.hidden_from_public">
                                    <td tal:case="True" i18n:translate>Yes</td>
                                    <td tal:case="False" i18n:translate>No</td>
                                </tal:b>
                            </tr>
                        </tal:b>
                    </tbody>
                </table>
            </tal:b>
        </tal:b>
        <p tal:case="False" i18n:translate="">No entries found.</p>
    </tal:b>
</metal:course_event_listing>

</body>
</html>