<div metal:use-macro="layout.base" i18n:domain="onegov.fsi">
    <tal:b metal:fill-slot="title">
        ${layout.title}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <div class="row">
            <div class="columns small-12">
                <div class="row">
                    <div class="columns small-12">
                        <strong tal:condition="not: reservations" i18n:translate="">No reservations found.</strong>
                        <tal:b tal:condition="reservations|nothing">
                                <table class="hover">
                                    <thead>
                                        <th i18n:translate="">Description</th>
                                        <th i18n:translate="">Course Name</th>
                                        <th i18n:translate="">Date</th>
                                        <th i18n:translate="">Course Status</th>
                                        <th i18n:translate="">Course attended</th>
                                        <th i18n:translate="">Last info mail</th>

                                        <th i18n:translate="">Manage</th>
                                    </thead>
                                    <tbody>
                                        <tal:b tal:repeat="reservation reservations">
                                            <tr>
                                                <td>${str(reservation)}</td>
                                                <td><a href="${request.link(reservation.course_event)}">${reservation.course_event.name}</a></td>
                                                <td>${layout.format_date(reservation.course_event.start, 'date')}</td>
                                                <td>${layout.format_status(reservation.course_event.status)}</td>
                                                <tal:b tal:switch="reservation.event_completed">
                                                    <td tal:case="True" i18n:translate="">True</td>
                                                    <td tal:case="False" i18n:translate="">False</td>
                                                </tal:b>

                                                <td tal:define="sent reservation.info_sent">${layout.format_date(sent, 'date') if sent else '-'}</td>
                                                <td>
                                                    <tal:b tal:switch="reservation.course_event.is_past">
                                                        <metal:b tal:case="False" tal:define="item reservation" use-macro="layout.macros['intercooler_btn_for_item']"/>
                                                        <button tal:case="True" class="button tiny secondary disabled archived" i18n:translate="">Archived</button>
                                                    </tal:b>

                                                </td>
                                            </tr>
                                        </tal:b>
                                    </tbody>
                                </table>
                                <tal:b tal:condition="request.is_manager and layout.course_event and not layout.course_event.is_past">
                                    <a href="${layout.send_info_mail_url}" class="button success" i18n:translate="">Send Info Mail</a>
                                </tal:b>
                        </tal:b>
                    </div>
                </div>
            </div>
        </div>
    </tal:b>
</div>