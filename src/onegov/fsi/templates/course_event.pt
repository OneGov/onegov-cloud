<div metal:use-macro="layout.base" i18n:domain="onegov.fsi">
    <tal:b metal:fill-slot="title">
        ${model.name}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <div class="row">
            <div class="columns small-12">
                <div class="row">
                    <div class="columns small-12">
                        <tal:b tal:condition="model|nothing">

                            <h3 i18n:translate="">Details</h3>

                            <p tal:condition="request.is_manager and model.hidden_from_public">This course is hidden.</p>

                            <dl class="field-display">
                                <dt i18n:translate="">Location</dt>
                                <dd>${model.location}</dd>
                                <div class="clearfix"></div>
                            </dl>

                            <dl class="field-display">
                                <dt i18n:translate="">Date</dt>
                                <dd>${layout.format_date(model.start, 'event')}, ${layout.format_date(model.start, 'time')} - ${layout.format_date(model.end, 'time')}</dd>
                                <div class="clearfix"></div>
                            </dl>

                            <dl class="field-display">
                                <dt i18n:translate="">Presenter</dt>
                                <dd>${model.presenter_name}, ${model.presenter_email}</dd>
                                <div class="clearfix"></div>
                            </dl>

                            <dl class="field-display">
                                <dt i18n:translate="">Attendees</dt>
                                <dd>min. ${model.min_attendees} max. ${model.max_attendees}</dd>
                                <div class="clearfix"></div>
                            </dl>

                            <dl class="field-display">
                                <dt i18n:translate="">Remaining seats</dt>
                                <dd>${model.available_seats}</dd>
                                <div class="clearfix"></div>
                            </dl>

                              <dl class="field-display">
                                <dt i18n:translate="">Status</dt>
                                <dd>${layout.format_status(model.status)}</dd>
                                <div class="clearfix"></div>
                            </dl>

                            <tal:b tal:condition="request.is_logged_in" tal:define="registered model.has_reservation(request.attendee_id)">
                                <tal:b tal:switch="registered">
                                    <button tal:case="True" class="button success disabled"><i class="fa fa-check" aria-hidden="true"></i> <tal:b i18n:translate>Registered</tal:b></button>
                                    <metal:b tal:case="False" tal:condition="model.bookable" use-macro="layout.macros['intercooler_btn']"/>
                                </tal:b>

                                <p><strong tal:condition="not: model.bookable" i18n:translate="">This course event can't be booked anymore.</strong></p>
                            </tal:b>
                            <h3 i18n:translate="">Attendees</h3>

                            <tal:b tal:switch="model.reservations.count() == 0">
                                <p tal:case="True" i18n:translate>No entries found.</p>
                                <ul tal:case="False">
                                <tal:b tal:repeat="reservation model.reservations">
                                    <li>${str(reservation)}</li>
                                </tal:b>
                            </ul>

                            </tal:b>

                        </tal:b>
                    </div>
                </div>
            </div>
        </div>
    </tal:b>
</div>