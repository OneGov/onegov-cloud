<div metal:use-macro="layout.base" i18n:domain="onegov.feriennet">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <div class="grid-x grid-padding-x">
            <div class="cell medium-7 small-12">

                <div class="panel callout" tal:condition="model.username != request.current_username">
                    <i class="fa fa-warning" aria-hidden="true"></i>
                    <tal:b i18n:translate>
                        You are viewing this group invite as the user <strong i18n:name="name">${model.user.title}</strong>.
                    </tal:b>
                </div>

                <h3>
                    <a href="${request.link(model.occasion.activity)}">
                        ${model.occasion.activity.title}
                    </a>
                </h3>

                <div class="occasions">
                    <metal:b use-macro="layout.macros['occasion']" tal:define="show_enroll False"/>
                </div>

                <p i18n:translate class="panel" tal:condition="model.occasion.period.active|False">
                    Attendees can join their companions in a group to go to activities
                    together. This increases their chances to go together, but it is not a
                    guarantee.
                </p>

                <div class="panel callout" tal:condition="not:model.occasion.period.active|True" i18n:translate>
                    This group is from an inactive period.
                </div>

                <div class="children-group">
                    <h2 class="h3" i18n:translate>
                        Own Children
                    </h2>

                    <p tal:condition="not:existing" i18n:translate>
                        None of own children in group.
                    </p>

                    <ul tal:condition="existing" class="more-list own-children">
                        <li tal:repeat="attendee existing">
                            <b>${attendee.gender == 'male' and 'ðŸ‘¦' or 'ðŸ‘§'} ${attendee.name}</b>
                            <tal:b replace="group_action(attendee, 'leave')(layout)" />
                        </li>
                    </ul>

                    <!--! Show a drop down if there's at least one child -->
                    <tal:b condition="possible or existing">
                        <button type="button" data-ogc-toggle="#add-possible" aria-controls="add-possible" aria-expanded="false" class="button hollow">
                            <tal:b i18n:translate>
                                Add own child
                            </tal:b>
                            <i class="fa fa-chevron-down rotate" aria-hidden="true"></i>
                        </button>
                        <ul id="add-possible" class="more-list hidden" aria-hidden="true">
                            <li tal:repeat="attendee possible">
                                <b>${attendee.gender == 'male' and 'ðŸ‘¦' or 'ðŸ‘§'} ${attendee.name}</b>
                                <tal:b replace="group_action(attendee, 'join')(layout)" />
                            </li>
                            <li class="add-own-child">
                                <a href="${signup_url()}">
                                    <i class="fa fa-plus"></i> <b i18n:translate>Add new own child</b>
                                </a>
                            </li>
                        </ul>
                    </tal:b>

                    <!--! Show a simple button if there's no child yet -->
                    <tal:b condition="not possible and not existing">
                        <a href="${signup_url()}" class="button hollow">
                            <i class="fa fa-fw fa-plus-circle" aria-hidden="true"></i>
                            <tal:b i18n:translate>
                                Add own child
                            </tal:b>
                        </a>
                    </tal:b>
                </div>

                <div class="children-group">
                    <h2 class="h3" i18n:translate>
                        Other Children
                    </h2>
                    <a href="${mailto}" class="button hollow">
                        <i class="fa fa-fw fa-envelope" aria-hidden="true"></i>
                        <tal:b i18n:translate>
                            Invite other children
                        </tal:b>
                    </a>
                    <p>
                        <tal:b condition="not:external" i18n:translate>
                            No other children in group
                        </tal:b>

                        <ul tal:condition="external" class="more-list other-children">
                            <li tal:repeat="attendee external">
                                <b>${attendee.gender == 'male' and 'ðŸ‘¦' or 'ðŸ‘§'} ${attendee.name}</b>
                            </li>
                        </ul>
                    </p>
                </div>
            </div>
            <div class="cell medium-3 medium-offset-1 small-12 sidebar">
                <div class="sidebar-wrapper">
                    <tal:b metal:use-macro="layout.macros.users" />
                </div>
            </div>
        </div>
    </tal:b>
</div>
