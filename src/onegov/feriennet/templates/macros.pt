<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="onegov.feriennet">
<body>

<metal:favicon define-macro="favicon">
    <link tal:condition="layout.favicon_apple_touch_url|nothing" rel="apple-touch-icon" sizes="57x57" href="${layout.favicon_apple_touch_url}">
    <link tal:condition="layout.favicon_win_url|nothing" rel="icon" type="image/png" href="${layout.favicon_win_url}" sizes="16x16">
    <link tal:condition="layout.favicon_mac_url|nothing" rel="icon" type="image/png" href="${layout.favicon_mac_url}" sizes="32x32">
    <link tal:condition="layout.favicon_pinned_tab_safari_url|nothing" rel="mask-icon" href="${layout.favicon_pinned_tab_safari_url}" color="${layout.primary_color}">
    <meta name="theme-color" content="${layout.primary_color}">
    <!-- Google Tag Manager -->
    <script nonce="${request.content_security_policy_nonce('script')}">
        /* eslint-disable */
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://beobachten.projuventute.ch/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-WTBG4FX');
         /* eslint-enable */
    </script>
    <!-- End Google Tag Manager -->

</metal:favicon>

<metal:footer define-macro="footer">
    <footer id="footer" class="footer-container">
        <div class="grid-container">
            <div class="grid-x grid-padding-x footer-content">
                <metal:b use-macro="layout.macros['footer_columns']" />
                <metal:b use-macro="layout.macros['footer_sponsors']" />
                <metal:b use-macro="layout.macros['footer_links']" />
            </div>
        </div>
    </footer>

    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WTBG4FX"
        height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
</metal:footer>

<metal:footer_columns define-macro="footer_columns">
    <tal:b define="contact layout.org.contact_html|nothing;
        contact_url layout.org.contact_url|nothing;
        contact_url_label layout.org.contact_url_label|nothing;
        opening_hours layout.org.opening_hours_html|nothing;
        opening_hours_url layout.org.opening_hours_url|nothing;
        opening_hours_url_label layout.org.opening_hours_url_label|nothing;
        facebook layout.org.facebook_url|nothing;
        twitter layout.org.twitter_url|nothing;
        instagram layout.org.instagram_url|nothing;
        youtube layout.org.youtube_url|nothing;
        linkedin layout.org.linkedin_url|nothing;
        tiktok layout.org.tiktok_url|nothing;
        custom_links layout.custom_links|nothing;">
        <tal:b tal:condition="any((
            contact,
            contact_url,
            opening_hours,
            opening_hours_url,
            facebook,
            twitter,
            instagram,
            youtube,
            linkedin,
            tiktok,
            custom_links
        ))">
            <div class="small-12 medium-3 cell">
                <metal:b use-macro="layout.macros['footer_contact']" />
            </div>

            <div class="small-12 medium-5 cell">
                <metal:b use-macro="layout.macros['footer_opening_hours']" />
            </div>

            <div class="small-12 medium-4 cell">
                <metal:b use-macro="layout.macros['footer_social_media']" />
                <metal:b use-macro="layout.macros['footer_custom_links']" />
            </div>
        </tal:b>
    </tal:b>
</metal:footer_columns>

<metal:footer_social_media define-macro="footer_social_media">
    <tal:b condition="any((
            facebook,
            twitter,
            instagram,
            youtube,
            linkedin,
            tiktok,
        ))">

        <h5 i18n:translate>Follow us on</h5>
        <ul class="social-media-links">
            <a tal:condition="facebook" tal:attributes="href facebook">
                <i class="fab fa-facebook fa-fw fa-2x"></i>
            </a>
            <a tal:condition="twitter" tal:attributes="href twitter">
                <i class="fab fa-twitter fa-fw fa-2x"></i>
            </a>
            <a tal:condition="instagram" tal:attributes="href instagram">
                <i class="fab fa-instagram fa-fw fa-2x"></i>
            </a>
            <a tal:condition="youtube" tal:attributes="href youtube">
                <i class="fab fa-youtube fa-fw fa-2x"></i>
            </a>
            <a tal:condition="linkedin" tal:attributes="href linkedin">
                <i class="fab fa-linkedin fa-fw fa-2x"></i>
            </a>
            <a tal:condition="tiktok" tal:attributes="href tiktok">
                <i class="fab fa-tiktok fa-fw fa-2x"></i>
            </a>
        </ul>
    </tal:b>
</metal:footer_social_media>


<metal:footer_custom_links define-macro="footer_custom_links">
    <tal:b define="custom_links layout.custom_links">
        <tal:b tal:condition="custom_links" tal:repeat="link custom_links">
            <h5 class="custom-links" i18n:translate="">Links</h5>
            <a class="footer-link" href="${link[1]}"><i class="fa fa-link fa-fw"></i> ${link[0]}</a>
        </tal:b>
    </tal:b>
</metal:footer_custom_links>

<metal:footer_sponsors define-macro="footer_sponsors" i18n:domain="onegov.feriennet">
        <div class="cell small-12">
            <div class="grid-x grid-padding-x">
                <div class="cell small-12 medium-3">
                    <tal:b condition="request.locale.startswith('de')">
                        <a href="https://www.projuventute.ch/de/eltern/lehrpersonen-fachpersonen/feriennet" class="pro-juventute-logo">
                            <img src="${layout.static_file_path('projuventute.svg')}"
                                 alt="Pro Juventute Logo"
                                 i18n:attributes="alt"
                                 height="175px"
                                 width="151px"
                            >
                        </a>
                    </tal:b>
                    <tal:b condition="request.locale.startswith('fr')">
                        <a href="https://www.projuventute.ch/fr/parents/enseignantes-et-specialistes/reseau-vacances" class="pro-juventute-logo">
                            <img src="${layout.static_file_path('projuventute.svg')}"
                                 alt="Pro Juventute Logo"
                                 i18n:attributes="alt"
                                 height="175px"
                                 width="151px"
                            >
                        </a>
                    </tal:b>
                    <tal:b condition="request.locale.startswith('it')">
                        <a href="https://www.projuventute.ch/it" class="pro-juventute-logo">
                            <img src="${layout.static_file_path('projuventute.svg')}"
                                 alt="Pro Juventute Logo"
                                 i18n:attributes="alt"
                                 height="175px"
                                 width="151px"
                            >
                        </a>
                    </tal:b>
                </div>
                <div class="cell small-12 medium-3 pro-juventute-ad-text">
                    <h5 i18n:translate>Pro Juventute Feriennet</h5>
                    <!--! This is not being translated with our translation machinery as the content of this is very explicitly specified. -->

                    <div class="platform-promotion">
                        <tal:b condition="request.locale.startswith('de')">
                            <ul>
                                <li>
                                    <a class="footer-link" href="https://www.projuventute.ch/de/eltern/lehrpersonen-fachpersonen/feriennet">Über das Feriennet</a>
                                </li>
                                <li>
                                    <a class="footer-link" href="https://www.projuventute.ch/de/angebote">Weitere Angebote</a>
                                </li>
                                <li>
                                    <a href="https://www.projuventute.ch/de/helfen/spenden" class="donate-link footer-link">Spenden</a>
                                </li>
                            </ul>
                        </tal:b>
                        <tal:b condition="request.locale.startswith('fr')">
                            <ul>
                                <li>
                                    <a class="footer-link" href="https://www.projuventute.ch/fr/parents/enseignantes-et-specialistes/reseau-vacances">À propos de Feriennet</a>
                                </li>
                                <li>
                                    <a class="footer-link" href="https://www.projuventute.ch/fr/prestations">Programmes</a>
                                </li>
                                <li>
                                    <a href="https://www.projuventute.ch/fr/soutenir/dons" class="donate-link footer-link">Dons</a>
                                </li>
                            </ul>
                        </tal:b>
                        <tal:b condition="request.locale.startswith('it')">
                            <div>
                                <a class="footer-link" href="https://www.projuventute.ch/it">
                                    Feriennet è la piattaforma di prenotazione di Pro Juventute per campi e colonie di vacanza.
                                </a>
                                <span>
                                    Potete trovare altri progetti della fondazione <a class="footer-link" href="https://www.projuventute.ch/it/servizi">qui</a>.
                                </span>
                            </div>

                            <div>
                                Volete sostenere il nostro lavoro per i bambini e i giovani in Svizzera? Allora potete effettuare una donazione <a href="https://www.projuventute.ch/it/supporto/donare?utm_source=spendenLink&utm_medium=spendenLinkFooter&utm_campaign=feriennet" class="donate-link footer-link">qui</a>. Grazie mille.
                            </div>

                            <div>
                                Questa piattaforma è stata realizzata grazie al generoso sostegno dei nostri <a class="footer-link" href="https://www.projuventute.ch/it">partner</a> e sviluppata da <a class="footer-link" href="https://www.seantis.ch">Seantis GmbH</a> con <a class="footer-link" href="https://www.admin.digital">Onegov Cloud</a>, supportata da <a class="footer-link" href="https://www.netcetera.com">Netcetera AG</a>.
                            </div>
                        </tal:b>
                    </div>
                </div>
                <div class="cell small-12 medium-3">
                    <h5 i18n:translate>Implementation</h5>
                    <ul>
                        <li>
                            <a class="footer-link" href="https://www.seantis.ch">Seantis GmbH</a>
                        </li>
                        <li>
                            <a class="footer-link" href="https://www.admin.digital">Onegov Cloud</a>
                        </li>
                        <li>
                            <a class="footer-link" href="https://www.netcetera.com">Netcetera AG</a>
                        </li>
                    </ul>
                </div>
                <div class="cell small-12 medium-3">
                    <div class="platform-awards">
                        <metal:b use-macro="layout.macros.bosw_award" />
                        <metal:b use-macro="layout.macros.onegov_award" />
                    </div>
                </div>
            </div>
        </div>
        <div class="cell small-12 sponsor-footer">
            <h5 i18n:translate>Feriennet Partner</h5>

            <div tal:repeat="batch layout.batched(layout.app.sponsors, 4)" class="grid-x grid-padding-x">
                <div tal:repeat="sponsor batch" class="cell small-12 medium-3 large-3 ${repeat.sponsor.end and 'end' or ''}">
                    <div tal:define="sponsor sponsor and sponsor.compiled(request)" tal:condition="sponsor and sponsor.logo|False" class="sponsor" style="background-color: ${sponsor.background};">
                        <a href="${sponsor.logo_url}" title="${sponsor.name}">
                            <div style="background-image: url('${sponsor.url_for(request, sponsor.logo)}')"></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
</metal:footer_sponsors>

<metal:footer_links define-macro="footer_links" i18n:domain="onegov.org">
    <div class="small-12 cell footer-links">
        <span>&copy; Pro Juventute ${layout.today().year}</span>
        <span>
            <a class="footer-link" href="https://github.com/OneGov/onegov-cloud/blob/master/CHANGES.md#release-${layout.app.version.replace('.', '')}">Feriennet ${layout.app.version}</a>
        </span>
        <span>
            <tal:b condition="request.locale.startswith('de')">
            <a class="footer-link" href="https://www.projuventute.ch/de/datenschutz" i18n:translate>
                Privacy Protection</a>
            </tal:b>
            <tal:b condition="request.locale.startswith('fr')">
            <a class="footer-link" href="https://www.projuventute.ch/fr/protection-des-donnees" i18n:translate>
                Privacy Protection</a>
            </tal:b>
            <tal:b condition="request.locale.startswith('it')">
            <a class="footer-link" href="https://www.projuventute.ch/it/protezione-dei-dati" i18n:translate>
                Privacy Protection</a>
            </tal:b>
        </span>
        <span>
            <tal:b condition="request.locale.startswith('de')">
            <a class="footer-link" href="https://www.projuventute.ch/de/nutzungsbedingungen">
                Nutzungsbedingungen</a>
            </tal:b>
            <tal:b condition="request.locale.startswith('fr')">
            <a class="footer-link" href="https://www.projuventute.ch/fr/conditions-dutilisation">
                Conditions d'utilisation</a>
            </tal:b>
            <tal:b condition="request.locale.startswith('it')">
            <a class="footer-link" href="https://www.projuventute.ch/it/condizioni-di-utilizzo">
                Condizioni di utilizzo</a>
            </tal:b>
        </span>
        <span tal:condition="not request.is_logged_in">
            <a class="footer-link" href="${layout.login_from_path()}" i18n:translate>
                Login
            </a>
        </span>
    </div>
</metal:footer_links>

<metal:bosw_award define-macro="bosw_award" i18n:domain="onegov.feriennet">
    <tal:b condition="request.locale.startswith('de')">
        <a href="https://www.projuventute.ch/de/eltern/lehrpersonen-fachpersonen/feriennet" class="bosw-award">
            <img src="${layout.static_file_path('bosw-award.png')}"
                 alt="Best of Swiss Web Award 2019"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
    <tal:b condition="request.locale.startswith('fr')">
        <a href="https://www.projuventute.ch/fr/parents/enseignantes-et-specialistes/reseau-vacances" class="bosw-award">
            <img src="${layout.static_file_path('bosw-award.png')}"
                 alt="Best of Swiss Web Award 2019"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
    <tal:b condition="request.locale.startswith('it')">
        <a href="https://www.projuventute.ch/it" class="bosw-award">
            <img src="${layout.static_file_path('bosw-award.png')}"
                 alt="Best of Swiss Web Award 2019"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
</metal:bosw_award>

<metal:onegov_award define-macro="onegov_award" i18n:domain="onegov.feriennet">
    <tal:b condition="request.locale.startswith('de')">
        <a href="https://www.projuventute.ch/de/eltern/lehrpersonen-fachpersonen/feriennet" class="onegov-award">
            <img src="${layout.static_file_path('onegov-award.png')}"
                 alt="OneGov.ch Award"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
    <tal:b condition="request.locale.startswith('fr')">
        <a href="https://www.projuventute.ch/fr/parents/enseignantes-et-specialistes/reseau-vacances" class="onegov-award">
            <img src="${layout.static_file_path('onegov-award.png')}"
                 alt="OneGov.ch Award"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
    <tal:b condition="request.locale.startswith('it')">
        <a href="https://www.projuventute.ch/it" class="onegov-award">
            <img src="${layout.static_file_path('onegov-award.png')}"
                 alt="OneGov.ch Award"
                 i18n:attributes="alt"
            >
        </a>
    </tal:b>
</metal:onegov_award>

<metal:footer_projuventute define-macro="footer_projuventute" i18n:domain="onegov.feriennet">
    <h2 i18n:translate>Platform</h2>
    <a href="https://www.projuventute.ch/" class="projuventute-logo">
        <img
            src="${layout.static_file_path('projuventute.svg')}"
            alt="Pro Juventute Logo"
            i18n:attributes="alt"
            height="175px"
            width="151px"
        >
    </a>
</metal:footer_projuventute>

<metal:b define-macro="extra_usermanagement_fields" i18n:domain="onegov.feriennet">
    <div tal:define="emergency user.data.get('emergency')" tal:condition="emergency">
        <dt i18n:translate>Emergency Contact</dt>
        <dd><a href="tel:${emergency}">${emergency}</a></dd>
    </div>
    <div tal:define="phone user.data.get('phone')" tal:condition="phone">
        <dt i18n:translate>Phone</dt>
        <dd><a href="tel:${layout.format_phone_number(phone)}">${layout.format_phone_number(phone)}</a></dd>
    </div>
</metal:b>

<metal:activity_ticket_summary define-macro="activity_ticket_summary" i18n:domain="onegov.feriennet">
    <tal:b define="user activity.user.data.organisation or activity.user.title|activity.user.title">

        <div class="panel">

            <div i18n:translate>
                The activity associated with this ticket belongs to <strong i18n:name="user">${user}</strong>.
            </div>
            <div i18n:translate tal:condition="is_first">
                This is the user's first activity.
            </div>
            <div i18n:translate tal:condition="not is_first">
                The user has submitted activities before.
            </div>

            <p>
                <br>
                <span i18n:translate>Activity State</span>: <strong><metal:b use-macro="layout.macros.activity_state_text" /></strong>
            </p>

            <p tal:condition="activity.state != 'accepted'" i18n:translate>
                Please review the activity carefully before publishing it.
            </p>

            <p tal:condition="activity.state == 'accepted'" i18n:translate>
                To remove this activity from the public part of the website, you can archive it.
            </p>
        </div>

        <h2>${activity.title}</h2>

        <p>
            <span class="page-lead" tal:condition="activity.lead" tal:content="layout.paragraphify(layout.linkify(activity.lead))" />
            <span>${period.title}</span>
        </p>

    </tal:b>
</metal:activity_ticket_summary>

<metal:activity_detailed define-macro="activity_detailed" i18n:domain="onegov.feriennet">

    <tal:b metal:use-macro="layout.macros.page_content"
        tal:define="lead layout.paragraphify(layout.linkify(activity.lead)); text activity.text; coordinates activity.coordinates; people None; contact None; show_side_panel True; highlight_contacts False; location activity.location">

        <div metal:fill-slot="after-lead" tal:condition="activity.tags">
            <ul class="tags">
                <li class="blank-label" tal:repeat="tag activity.ordered_tags(request)">
                    ${request.translate(tag)}
                </li>
            </ul>
        </div>

        <tal:b metal:fill-slot="before-panels">
            <div class="side-panel organiser-panel" tal:define="organiser activity.user; public request.app.public_organiser_data" tal:condition="public">
                <h3 i18n:translate>Organiser</h3>
                <metal:b use-macro="layout.macros.organiser" />
            </div>
        </tal:b>

        <tal:b metal:fill-slot="after-panels" tal:condition="show_ticket_panel and request.is_organiser">
            <div class="side-panel activity-status-panel">
                <h3 i18n:translate>Activity</h3>

                <dl>
                    <dt i18n:translate>
                        Activity State
                    </dt>
                    <dd>
                        <metal:b use-macro="layout.macros.activity_state" />
                    </dd>

                    <tal:b condition="layout.ticket and layout.model.state != 'preview'">
                        <dt i18n:translate>
                            Ticket State
                        </dt>
                        <dd class="activity-ticket-state" tal:define="ticket layout.ticket">
                            <metal:b use-macro="layout.macros.ticket_status" />
                        </dd>
                    </tal:b>
                </dl>
            </div>
        </tal:b>

    </tal:b>
</metal:activity_detailed>

<metal:activity_state define-macro="activity_state" i18n:domain="onegov.feriennet">
    <div class="activity-state activity-state-${activity.state}">
        <metal:b use-macro="layout.macros.activity_state_text" />
    </div>
</metal:activity_state>

<metal:activity_state_text define-macro="activity_state_text" i18n:domain="onegov.feriennet">
    <tal:b switch="activity.state">
        <tal:b i18n:translate case="string:preview">Preview</tal:b>
        <tal:b i18n:translate case="string:proposed">Proposed</tal:b>
        <tal:b i18n:translate case="string:accepted">Published</tal:b>
        <tal:b i18n:translate case="string:archived">Archived</tal:b>
    </tal:b>
</metal:activity_state_text>

<metal:activity_card define-macro="activity_card" i18n:domain="onegov.feriennet">
    <div class="activity-list-item card">
        <a href="${request.link(activity)}">
            <div class="grid-x align-middle">
                <div class="activity-image" tal:condition="activity.thumbnail|nothing" style="width: 100%; padding-bottom: 60%; background-image: url('${activity.thumbnail}'); background-size: cover;"></div>
                <div class="cell small-12 card-section">

                    <h5>${activity.title}</h5>

                    <span class="page-lead" tal:content="layout.paragraphify(activity.lead)"/>

                    <div class="row collapse" tal:define="
                        ages activity_ages(activity, request);
                        min_cost activity_min_cost(activity, request);
                        available_spots activity_spots(activity, request);
                    ">
                        <div class="small-12 columns factoids">
                            <tal:b condition="ages">
                                <span class="age" tal:define="
                                    min_age min(age.lower for age in ages);
                                    max_age max(age.upper - 1 for age in ages);
                                ">
                                    <i class="fa fa-child"></i>
                                    <span i18n:translate class="show-for-sr">Age</span>
                                    <span i18n:translate>
                                        <tal:b replace="min_age" i18n:name='min_age' />
                                        -
                                        <tal:b replace="max_age" i18n:name='max_age' />
                                        years
                                    </span>
                                </span>
                            </tal:b>
                            <tal:b condition="min_cost is not None">
                                <span class="cost">
                                    <i class="fa fa-money-bill-wave"></i>
                                    <span i18n:translate class="show-for-sr">Cost</span>

                                    <span i18n:translate>
                                        starting at <tal:b i18n:name='price'>${'{:.2f}'.format(min_cost)}</tal:b> CHF
                                    </span>
                                </span>
                            </tal:b>
                            <tal:b>
                                <span class="${available_spots and 'available-spots' or 'full'}">
                                    <span i18n:translate class="show-for-sr">Free Spots</span>

                                    <span i18n:translate tal:condition="not available_spots">
                                        No free spots
                                    </span>
                                    <span i18n:translate tal:condition="available_spots == 1">
                                        1 free spot
                                    </span>
                                    <span i18n:translate tal:condition="available_spots > 1">
                                        <tal:b i18n:name="count">${available_spots}</tal:b> free spots
                                    </span>
                                </span>
                            </tal:b>
                        </div>
                    </div>
                </div>
            </div>
        </a>
    </div>
</metal:activity_card>

<metal:organiser define-macro="organiser" i18n:domain="onegov.feriennet">
    <div class="organiser">
        <ul>
            <tal:b condition="'name' in public">
                <li class="organiser-name"
                    tal:condition="organiser.data.organisation|nothing"
                    tal:content="organiser.data.organisation">
                </li>
                <li class="organiser-name"
                    tal:condition="organiser.realname.strip()|nothing"
                    tal:content="organiser.realname">
                </li>
            </tal:b>
            <tal:b condition="'address' in public">
                <li class="organiser-address" tal:condition="organiser.data.address|organiser.data.zip_code|organiser.data.place|nothing">
                    <span class="newlines" tal:condition="organiser.data.address|nothing">${organiser.data.address}</span>
                    <div tal:condition="organiser.data.zip_code|organiser.data.place|nothing">
                        <span tal:condition="organiser.data.zip_code|nothing">${organiser.data.zip_code}</span>
                        <span tal:condition="organiser.data.place|nothing">${organiser.data.place}</span>
                    </div>
                </li>
            </tal:b>
            <tal:b condition="'email' in public">
                <li tal:define="email organiser.data.email or organiser.username|organiser.username">
                    <a href="mailto:${email}"><i class="fa fa-envelope"></i> ${email}</a>
                </li>
            </tal:b>
            <tal:b condition="'phone' in public">
                <li tal:condition="organiser.data.phone|nothing">
                    <a href="tel:${layout.format_phone_number(organiser.data.phone)}"><i class="fa fa-phone"></i> ${layout.format_phone_number(organiser.data.phone)}</a>
                </li>
            </tal:b>
            <tal:b condition="'website' in public">
                <li tal:condition="organiser.data.website|nothing">
                    <a href="${organiser.data.website}"><i class="fa fa-link"></i> ${organiser.data.website.replace('http://', '').replace('https://', '').rstrip('/')}</a>
                </li>
            </tal:b>
        </ul>
    </div>
</metal:organiser>

<metal:occasion define-macro="occasion" i18n:domain="onegov.feriennet">
    <div class="occasion occasion-card card" tal:define="
        show_enroll show_enroll|nothing;
        show_links show_links|nothing;
        show_needs show_needs|nothing;
        period occasion.period;
        wrap_occasion_link wrap_occasion_link|lambda url: url">

        <div class="card-section info">

            <div class="factoids">
                <div class="dates">
                    <ul>
                        <li tal:repeat="date occasion.dates">
                            ${layout.format_datetime_range(date.localized_start, date.localized_end)}
                        </li>
                    </ul>
                </div>
                <div class="location" tal:condition="occasion.meeting_point">
                    <p>
                        <span i18n:translate class="show-for-sr">Meeting Point</span>
                        <span>${occasion.meeting_point}</span>
                    </p>
                </div>

                <div class="overlap-check" tal:condition="occasion.exclude_from_overlap_check">
                    <p><span i18n:translate>Independent of other occasions</span></p>
                </div>

                <div class="bring-cash" tal:condition="period.all_inclusive and occasion.cost and period.pay_organiser_directly" >
                    <p i18n:translate>Please bring <tal:b i18n:name="cost" replace="occasion.cost" /> CHF in cash.</p>
                </div>
            </div>

            <div class="factoids">
                <div class="age">
                    <p>
                        <span i18n:translate class="show-for-sr">Age</span>
                        <span i18n:translate>
                            <tal:b replace="occasion.age.lower" i18n:name='min_age' />
                            -
                            <tal:b replace="occasion.age.upper - 1" i18n:name='max_age' />
                            years
                        </span>
                    </p>
                </div>

                <div class="spots" tal:condition="not period.finalized">
                    <span i18n:translate class="show-for-sr">Participants</span>

                    <p i18n:translate tal:condition="occasion.spots.lower">
                        <tal:b replace="occasion.spots.lower" i18n:name='min_spots' />
                        -
                        <tal:b replace="occasion.spots.upper - 1" i18n:name='max_spots' />
                        participants
                    </p>

                    <p i18n:translate tal:condition="not:occasion.spots.lower">
                        up to
                        <tal:b replace="occasion.spots.upper - 1" i18n:name='max_spots' />
                        participants
                    </p>
                </div>

                <tal:b condition="period.all_inclusive and occasion.cost">
                    <div class="cost">
                        <p>
                            <span i18n:translate class="show-for-sr">Cost</span>

                            <tal:b i18n:translate>
                                <tal:b i18n:name="cost" replace="occasion.cost" /> CHF
                            </tal:b>
                        </p>
                    </div>
                </tal:b>

                <tal:b condition="not period.all_inclusive">
                    <div class="cost" tal:define="cost occasion.total_cost">
                        <p>
                            <span i18n:translate class="show-for-sr">Cost</span>

                            <tal:b condition="cost" i18n:translate>
                                <tal:b i18n:name="cost" replace="cost" /> CHF
                            </tal:b>
                            <tal:b condition="not:cost" i18n:translate>
                                Free of charge
                            </tal:b>
                        </p>
                    </div>
                </tal:b>
            </div>
        </div>
        <div class="card-section note" tal:condition="occasion.note">
            <div class="factoids">
                <div class="note">
                    <p><i>${occasion.note}</i></p>
                </div>
            </div>
        </div>
        <div class="card-section" tal:condition="show_links and layout.is_editable">
            <div class="factoids">
                <tal:b define="links tuple(occasion_links(occasion))" condition="links">
                    <div>
                        <p>
                            <tal:b repeat="link links">
                                <tal:b replace="link(layout)" />
                            </tal:b>
                        </p>
                    </div>
                </tal:b>
            </div>
        </div>

        <div class="card-section" tal:condition="show_needs">

            <div class="occasion-needs" >
                <h5 i18n:translate>Needs</h5>

                <div class="need-add">
                    <a href="${request.link(occasion, 'add-need')}"><i class="fa fa-plus"></i> <tal:b i18n:translate>Enter a need</tal:b></a>
                </div>

                <div tal:condition="not:occasion.needs" class="need-info">
                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                    <span i18n:translate>Keep track of required resources by adding needs.</span>
                </div>

                <ul tal:condition="occasion.needs">
                    <li tal:repeat="need occasion.needs">
                        <span class="need-number">
                            ${need.number.lower} - ${need.number.upper - 1}
                        </span>
                        <span class="need-name">
                            ${need.name}

                            <tal:b condition="not:need.accept_signups">
                                <i class="fa fa-eye-slash" aria-hidden="true" title="Accept signups" i18n:attributes="title"></i>
                            </tal:b>
                        </span>
                        <span class="need-actions" tal:condition="request.is_admin">
                            <a href="${request.link(need, 'edit')}" i18n:translate>Edit</a>
                            <a class="confirm" data-confirm="Do you really want to delete this need?" data-confirm-yes="Delete need" data-confirm-no="Cancel" ic-delete-from="${layout.csrf_protected_url(request.link(need))}" ic-verb="DELETE" redirect-after="${request.link(occasion)}" i18n:translate i18n:attributes="data-confirm;data-confirm-yes;data-confirm-no">
                                Delete
                            </a>
                        </span>
                        <span class="need-description">
                            <tal:b replace="layout.paragraphify(layout.linkify(need.description))" />
                        </span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="card-section enroll" tal:condition="show_enroll">
            <tal:b switch="request.is_logged_in">
                <a tal:case="True" class="button" href="${wrap_occasion_link(request.link(occasion, 'book'))}" i18n:translate>Enroll</a>
                <a tal:case="False" class="button" href="${layout.login_to_url(wrap_occasion_link(request.link(occasion, 'book')), skip=True)}" i18n:translate>Enroll</a>
            </tal:b>
        </div>
    </div>
</metal:occasion>

<metal:occasions-by-period define-macro="occasions_by_period" i18n:domain="onegov.feriennet">
    <ul class="occasions">
        <li tal:repeat="occasion occasions">
            <div class="occasion-title">
                <h4><tal:b>${repeat.occasion.number}.</tal:b> <tal:b i18n:translate>Occasion</tal:b></h4>

                <div class="state" tal:condition="period.phase not in ('inactive', 'wishlist')">
                    <div class="full" tal:condition="not occasion.cancelled and occasion.full">
                        <span i18n:translate>Fully booked</span>
                    </div>

                    <div class="cancelled" tal:condition="occasion.cancelled">
                        <span i18n:translate>Rescinded</span>
                    </div>
                    <div class="available-spots" tal:condition="not occasion.cancelled and not occasion.full and not period.is_booking_in_past">
                        <span i18n:translate><tal:b i18n:name="count" replace="occasion.available_spots" /> spots available</span>
                    </div>

                    <div class="spots" tal:condition="not occasion.cancelled and period.is_booking_in_past">
                        <span i18n:translate><tal:b i18n:name="count" replace="occasion.attendee_count" /> attendees</span>
                    </div>
                </div>
            </div>

            <tal:b metal:use-macro="layout.macros.occasion" tal:define="show_links True; show_enroll show_enroll(occasion); show_needs request.is_admin" />
        </li>
    </ul>

    <div class="panel period-hint-panel">
        <div class="hints">
            <tal:b metal:use-macro="layout.macros.period_hints" tal:define="activity_view True" />
        </div>
    </div>
</metal:occasions-by-period>

<metal:star define-macro="star" i18n:domain="onegov.feriennet">
    <tal:b condition="not booking.starred">
        <i id="star-${booking.id}" class="far fa-star" aria-hidden="true"></i>
        <span class="show-for-sr" i18n:translate>Mark activity as favorite</span>
    </tal:b>
    <tal:b condition="booking.starred">
        <i id="star-${booking.id}" class="fa fa-star" aria-hidden="true"></i>
        <span class="show-for-sr" i18n:translate>Unmark activity as favorite</span>
    </tal:b>
</metal:star>

<metal:star define-macro="nobble" i18n:domain="onegov.feriennet">
    <tal:b define="booking_id booking.id|record.booking_id; nobbled booking.nobbled|record.booking_nobbled">
        <tal:b condition="not nobbled">
            <i id="nobble-${booking_id}" class="far fa-fw fa-square" aria-hidden="true"></i>
            <span class="show-for-sr" i18n:translate>Increase the bookings priority</span>
        </tal:b>
        <tal:b condition="nobbled">
            <i id="nobble-${booking_id}" class="fas fa-fw fa-check-square" aria-hidden="true"></i>
            <span class="show-for-sr" i18n:translate>Decrease the bookings priority</span>
        </tal:b>
    </tal:b>
</metal:star>

<metal:hints define-macro="period_hints" i18n:domain="onegov.feriennet">

    <div tal:condition="period.finalized and not period.book_finalized"
         class="hint hint-finalized" i18n:translate>
            There cannot be any more bookings.
    </div>

    <div tal:condition="(not period.finalized or period.book_finalized) and period.confirmed and period.deadline_days"
         class="hint hint-deadline" i18n:translate>
            Last-minute bookings are possible up to <tal:b i18n:name="days">${period.deadline_days}</tal:b> days before each occasion.
    </div>

    <div tal:condition="not period.finalized and period.confirmed and period.cancellation_date"
         class="hint hint-cancellation" i18n:translate>
            The deadline for last-minute cancellations is the <strong i18n:name="date">${layout.format_date(period.cancellation_date, 'date_long')}</strong>.
    </div>

    <div tal:condition="not period.finalized and period.confirmed and period.cancellation_days"
         class="hint hint-cancellation" i18n:translate>
            Last-minute cancellations are possible up to <tal:b i18n:name="days">${period.cancellation_days}</tal:b> days before each occasion.
    </div>

    <div tal:condition="period.max_bookings_per_attendee and period.confirmable"
         class="hint hint-max-activities" i18n:translate>
            Each child is assigned up to <tal:b i18n:name="count" tal:replace="period.max_bookings_per_attendee" /> activities. To ensure a good matching you can signup for more activities than those.
    </div>

    <div tal:condition="period.max_bookings_per_attendee and not period.confirmable"
         class="hint hint-max-activities" i18n:translate>
            Each child can be registered for up to <tal:b i18n:name="count" tal:replace="period.max_bookings_per_attendee" /> activities.
    </div>

    <div tal:condition="period.all_inclusive and period.booking_cost"
         class="hint hint-costs" i18n:translate>
            The passport costs <tal:b i18n:name="amount" tal:replace="period.booking_cost" /> CHF per child. Individual activities may incur additional charges.
    </div>
    <div tal:condition="period.all_inclusive is False and period.booking_cost"
         class="hint hint-costs" i18n:translate>
            A booking costs <tal:b i18n:name="amount" tal:replace="period.booking_cost" /> CHF per child. Individual activities may incur additional charges.
    </div>

    <div tal:condition="period.minutes_between"
         class="hint hint-minutes" i18n:translate>
            Between each booking we enforce <tal:b i18n:name="minutes" tal:replace="period.minutes_between" /> minutes of block-time in which no other booking is permitted.
    </div>

    <div tal:condition="period.alignment == 'day'"
        class="hint hint-minutes">
        <tal:b i18n:translate>Attendees are limited to one activity per day</tal:b>.
    </div>

    <div tal:condition="period.confirmable and period.is_prebooking_in_future and not activity_view|False"
        class="hint hint-prebooking" i18n:translate>
        Prebooking begins on <strong tal:content="layout.format_date(period.prebooking_start, 'date_long')" i18n:name="date" />.
    </div>

    <div tal:condition="period.confirmable and period.is_currently_prebooking and not activity_view|False"
        class="hint hint-prebooking active" i18n:translate>
        Prebooking is now active until <strong tal:content="layout.format_date(period.prebooking_end, 'date_long')" i18n:name="date" />.
    </div>

    <div tal:condition="period.confirmable and period.is_prebooking_in_past and period.confirmed and not period.finalized"
        class="hint hint-prebooking finish" i18n:translate>
        Prebooking has ended.
    </div>

    <div tal:condition="period.is_booking_in_future and not activity_view|False"
        class="hint hint-booking" i18n:translate>
        Booking begins on <strong tal:content="layout.format_date(period.booking_start, 'date_long')" i18n:name="date" />.
    </div>

    <div tal:condition="period.is_currently_booking and not activity_view|False"
        class="hint hint-booking active" i18n:translate>
        Booking is now active until <strong tal:content="layout.format_date(period.booking_end, 'date_long')" i18n:name="date" />.
    </div>

    <div tal:condition="period.is_booking_in_past and period.confirmed and not period.finalized"
        class="hint hint-booking finish" i18n:translate>
        Booking has ended.
    </div>
</metal:hints>

<metal:booking_state define-macro="booking_state" i18n:domain="onegov.feriennet">
    <tal:b switch="state">
        <span tal:case="'open'" class="state ${state}" i18n:translate>
            Open
        </span>
        <span tal:case="'accepted'" class="state ${state}" i18n:translate>
            Accepted
        </span>
        <span tal:case="'cancelled'" class="state ${state}" i18n:translate>
            Cancelled
        </span>
        <span tal:case="'denied'" class="state ${state}" i18n:translate>
            Denied
        </span>
        <span tal:case="'blocked'" class="state ${state}" i18n:translate>
            Blocked
        </span>
    </tal:b>
</metal:booking_state>

<metal:periods define-macro="periods" i18n:domain="onegov.feriennet" i18n:domain="onegov.feriennet">
    <div class="filter-panel side-panel" tal:condition="len(periods) > 1">
        <h3 class="filter-title" i18n:translate tal:condition="not hide_title|True">Period</h3>
        <select data-auto-redirect tal:define="view_name view_name|None">
            <option tal:repeat="p periods" value="${request.link(model.for_period(p), name=view_name)}" tal:attributes="selected p.id == period.id">
                ${p.title}
            </option>
        </select>
    </div>
</metal:periods>

<metal:users define-macro="users" i18n:domain="onegov.feriennet">
    <div class="filter-panel side-panel" tal:condition="request.is_admin and users">
        <h3 class="filter-title" i18n:translate>User</h3>
        <select data-auto-redirect>
            <tal:b repeat="u users">
                <option tal:condition="u.username == request.current_username or u.realname"
                        tal:attributes="selected u.id == user.id"
                        value="${user_select_link(u)}">
                    ${u.title}
                </option>
            </tal:b>
        </select>
    </div>
</metal:users>

<metal:actions_button define-macro="actions-button" i18n:domain="onegov.feriennet" i18n:domain="onegov.feriennet">

    <button type="button" data-toggle="${action_id}" aria-expanded="false" class="tiny button dropdown-button actions-button">
        <span class="show-for-sr" i18n:translate>Actions</span>
        <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
    </button>
    <ul id="${action_id}" data-dropdown data-auto-focus="true" class="dropdown-pane dropdown-options" data-position="bottom" data-alignment="right" data-auto-focus="true" aria-hidden="true" data-close-on-click="true" >
        <li
            tal:repeat="link links"
            tal:content="link(layout)"
        />
    </ul>

</metal:actions_button>

<metal:search_result_attendees define-macro="search_result_attendees" i18n:domain="onegov.feriennet">
    <a href="${request.link(result)}">${result.name}</a>
    <p i18n:translate>Attendee</p>
</metal:search_result_attendees>

<metal:ticket_status_page_message define-macro="ticket_status_page_message" i18n:domain="onegov.feriennet">
    <p i18n:translate tal:condition="ticket.state == 'open'">
        Your request will be processed shortly. To see the state of
        your process your may return to this page at any time.

        All information on this page has been sent to your e-mail address.
    </p>
    <p i18n:translate tal:condition="ticket.state == 'closed'">
        Your request has been completed.
    </p>
</metal:ticket_status_page_message>


<metal:payment_link_fallback define-macro="payment_link_fallback" i18n:domain="onegov.feriennet">
    <tal:b switch="link.__tablename__">
        <tal:b case="'invoice_items'">
            <div tal:condition="repeat.link.start">
                <a href="${request.link(link)}">
                    <strong>${request.app.user_titles_by_name[link.invoice.user.username]}</strong>
                </a>
                <div>
                    ${request.app.periods_by_id[link.invoice.period_id.hex].title}
                </div>
            </div>
        </tal:b>
    </tal:b>
</metal:payment_link_fallback>


<metal:accept_tos define-macro="accept_tos" i18n:domain="onegov.feriennet">
    <div class="accept-tos" i18n:translate style="margin-bottom: .5rem">
        I have read the <a href="${url}" i18n:name="tos" i18n:translate>TOS</a> and accept them.
    </div>
</metal:accept_tos>


<metal:filters define-macro="filters" i18n:domain="onegov.feriennet">

    <div class="show-for-medium" id="filters-top" ic-push-url="true">
        <tal:b tal:repeat="filter filters.keys()">
            <button class="button hollow dropdown-button ${'active' if count_active(filters[filter]) else ''}" type="button" data-toggle="filter-${filter}" tal:condition="filters[filter]">
                <i class="fa fa-chevron-down"></i>${filters[filter][0]} (${count_active(filters[filter])})
            </button>
            <div class="dropdown-pane" data-close-on-click="true" id="filter-${filter}" ic-select-from-response="#filter-${filter}" ic-target="#filter-${filter}" data-dropdown tal:condition="filters[filter][1]">
                <div class="filter-panel">
                    <div metal:use-macro="layout.macros['tags']" tal:define="tags filters[filter][1]" />
                    <div class="grid-x grid-padding-x align-center">
                        <button  ic-select-from-response="#content" ic-target="#content" ic-get-from="${request.url.replace('/filters','',1)}" class="button apply-filters" type="button" data-toggle="filter-${filter}" i18n:translate>Apply filters</button>
                    </div>
                </div>
            </div>
        </tal:b>
    </div>

    <button id="mobile-filters-button" class="button hollow show-for-small-only" type="button" data-toggle="offCanvasFilters">
        <i class="fas fa-sliders-h"></i><tal:b i18n:translate>Filters</tal:b>
    </button>

    <div data-transition="overlap" data-off-canvas data-auto-focus="false" class="off-canvas position-right filters-mobile" id="offCanvasFilters" ic-push-url="true">
        <!-- Close button -->
        <div class="button-area">
            <button class="off-canvas-close-button" aria-label="Close menu" type="button" data-close>
                <i class="fa fa-times"></i>
            </button>
        </div>
        <div class="grid-x align-center">
            <h3><i class="fas fa-sliders-h"></i> <tal:b i18n:translate>Filters</tal:b></h3>
        </div>

        <div class="navigation-area">
            <div class="menu-wrapper">
                <ul class="accordion" data-accordion data-allow-all-closed="true" data-slide-speed="0">
                    <tal:b tal:repeat="filter mobile_filters.keys()">
                        <li class="accordion-item ${'is-active' if f'mobile-filter-{filter}' == active_filter else ''}" data-accordion-item>
                            <a href="#" class="accordion-title">
                                ${mobile_filters[filter][0]} (${count_active(filters[filter])})
                            </a>
                            <ul class="filter-panel accordion-content" data-tab-content id="mobile-filter-${filter}" ic-select-from-response="#offCanvasFilters" ic-target="#offCanvasFilters" data-tab-content >
                                <div metal:use-macro="layout.macros['tags']" tal:define="tags mobile_filters[filter][1]"/>
                            </ul>
                        </li>
                    </tal:b>
                </ul>
            </div>
        </div>

        <div class="grid-x align-center">
            <button ic-select-from-response="#content" ic-target="#content" ic-get-from="${request.url.replace('/filters','',1)}" class="button apply-filters" type="button" i18n:translate data-close>Apply filters</button>
        </div>
    </div>

</metal:filters>


<metal:user_panel define-macro="user_panel" i18n:domain="onegov.feriennet">
    <div class="side-panel filter-panel">
        <h3 class="filter-title" i18n:translate>Contact</h3>
        <dl class="field-display">
            <div>
                <dt i18n:translate>Name</dt>
                <dd>${user.title}</dd>
            </div>
            <div tal:define="email user.data.get('email') or user.username">
                <dt i18n:translate>E-Mail</dt>
                <dd>
                    <a href="mailto:${email}">
                        ${email}
                    </a>
                </dd>
            </div>
            <div tal:define="emergency user.data.get('emergency')" tal:condition="emergency">
                <dt i18n:translate>Emergency Contact</dt>
                <dd><a href="tel:${emergency}">${emergency}</a></dd>
            </div>
            <div tal:define="phone user.data.get('phone')" tal:condition="phone">
                <dt i18n:translate>Phone</dt>
                <dd><a href="tel:${phone}">${phone}</a></dd>
            </div>
            <div tal:condition="request.is_admin">
                <a href="${request.link(user)}" i18n:translate class="button radius secondary">
                    Manage user
                </a>
            </div>
        </dl>
    </div>
</metal:user_panel>

<metal:volunteer_cart define-macro="volunteer_cart" i18n:domain="onegov.feriennet">
    <div class="volunteer-cart-widget"
        data-empty-label="No activities in your list."
        data-button-label="Register as volunteer"
        data-remove-label="Remove"
        data-cart-url="${cart_url}"
        data-cart-submit-url="${cart_submit_url}"
        data-cart-action-url="${cart_action_url}"
        data-list-label="My List"
        data-is-dropdown="${is_dropdown}"
        i18n:attributes="data-empty-label;data-button-label;data-remove-label;data-list-label"></div>
</metal:volunteer_cart>

<metal:feriennet_links define-macro="feriennet_links">
    <div id="feriennet-links" class="text-center">
        <div class="grid-container">
            <div class="top-bar-left">
                <ul class="menu align-right">
                    <li tal:condition="volunteer_link">
                        <tal:b replace="volunteer_link(layout)" />
                    </li>
                    <li tal:condition="not request.is_logged_in">
                        <a href="${request.link(request.app.org, name='auth/register')}" i18n:translate>
                            Register
                        </a>
                    </li>
                    <li tal:condition="not request.is_logged_in">
                        <a href="${layout.login_from_path()}" i18n:translate>Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</metal:feriennet_links>

<metal:activities define-macro="activities_homepage" i18n:domain="onegov.feriennet">
    <div class="grid-x grid-padding-x">
        <tal:b tal:repeat="activity activities">
            <div class="subpage-cards what small-12 medium-6 large-4 cell">
                <tal:b metal:use-macro="layout.macros['activity_card']" />
            </div>
        </tal:b>
    </div>
    <div class="grid-x align-center">
        <a class="button hollow" href="${activities_link}" i18n:translate="">All activities</a>
    </div>
</metal:activities>

<metal:banner define-macro="banner" i18n:domain="onegov.feriennet">
    <div class="sponsor-banner ${position}">
        <a href="${banner.url}" class="banner-${position}">
            <img src="${banner.src}">
            <p class="banner-info">${banner.info}</p>
        </a>
    </div>
</metal:banner>
