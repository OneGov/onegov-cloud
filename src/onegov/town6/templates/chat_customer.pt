<div metal:use-macro="layout.base" i18n:domain="onegov.town6">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">

        <div class="grid-x chat">
            <div class="medium-7 cell">
                <div id="message-area" data-customer-name="${customer_name}" data-chat-id="${chat.id.hex}">
                    <p class="notification" id="accepted" style="display: none;"><i class="fas fa-info-circle"></i> Die Chatanfrage wurde angenommen</p>
                    <p class="notification" id="connecting" style="display: none;"><i class="fas fa-hourglass-start"></i> Verbinde mit Chatserver ...</p>
                    <p tal:condition="not chat.chat_history" id="start">Beschreiben Sie Ihr Anliegen um eine Anfrage zu starten.</p>
                    <div class="card chat-card" style="display: none;">
                        <p class="info"></p>
                        <div class="card-section">
                            <p></p>
                        </div>
                        <p class="info"></p>
                    </div>

                    <tal:b tal:repeat="message chat.chat_history">
                        <div class="card ${'left' if message.get('id') else 'right'}">
                            <p class="info">${message['user']}</p>
                            <div class="card-section">
                                <p>${message['text']}</p>
                            </div>
                            <p class="info">${message['time']}</p>
                        </div>
                    </tal:b>
                </div>
                <div id="chat-form">
                    <textarea id="chat" placeholder="Ihre Nachricht ..." rows="5"></textarea>
                    <button id="send" class="button">Senden</button>
                </div>
            </div>

            <div class="large-4 medium-4 cell medium-offset-1 sidebar">
                
            </div>
        </div>

    </tal:b>
</div>
