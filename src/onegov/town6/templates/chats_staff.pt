<div metal:use-macro="layout.base" i18n:domain="onegov.town6">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">

        <div class="grid-x chat">
            <div class="medium-7 cell">
                <p i18n:translate="" id="no-chat-open">Aktuell ist kein Chat geöffnet.</p>
                <div id="message-area" style="display:none;" data-staff-name="${user.username}" data-staff-id="${user.id.hex}">
                    <p class="notification" id="accepted" style="display: none;"><i class="fas fa-info-circle"></i> Sie haben die Chatanfrage angenommen</p>
                    <p class="notification" id="loading" style="display: none;"><i class="fas fa-hourglass-start"></i> Chat lädt</p>
                    <div class="card chat-card" style="display: none;">
                        <p class="info"></p>
                        <div class="card-section">
                            <p></p>
                        </div>
                        <p class="info"></p>
                    </div>
                </div>
                <div id="chat-form" style="display:none;">
                    <textarea id="chat" placeholder="Ihre Nachricht ..." rows="5"></textarea>
                    <button id="send" class="button">Senden</button>
                </div>
                <div id="chat-options" style="display:none;">
                    <button id="end-chat" class="button hollow">Chat Beenden</button>
                    <button id="create-ticket" class="button hollow">Ticket erstellen</button>
                </div>
            </div>

            <div class="large-4 medium-4 cell medium-offset-1 sidebar">
                <div class="sidebar-wrapper">
                    <div class="sidebar-content-wrapper">
                        <div class="side-panel">
                            <h3>Chat Anfragen</h3>
                            <p id="no-request">Aktuell keine neuen Anfragen.</p>
                            <ul class="more-list" id="request-list">
                                <li style="display: none;" id="new-request">
                                    <a class="list-link" href="#"><span class="list-title">Neue Anfrage</span><br/></a>
                                    <a class="button">Annehmen</a>
                                    <p class="list-lead preview"><i class="far fa-clock"></i> 5:00</p>
                                </li>
                            </ul>
                        </div>
                        <div class="side-panel">
                            <h3>Aktive Chats</h3>
                            <p tal:condition="not active_chats">Keine aktiven Chats.</p>
                            <ul class="more-list" tal:condition="active_chats">
                                <tal:b tal:repeat="chat active_chats">
                                    <li class="active-chat" data-chat-id="${chat.id.hex}" id="${chat.id.hex}">
                                        <a class="list-link" href="#">
                                            <span class="list-title">${chat.customer_name}</span>
                                        </a>
                                        <a href="#">
                                            <p class="list-lead preview">${layout.format_date(chat.last_change, 'datetime_short')}</p>
                                        </a>
                                    </li>
                                </tal:b>
                            </ul>
                        </div>
                        <div class="side-panel">
                            <h3>Letzte archivierte Chats</h3>
                            <p tal:condition="not archived_chats">Keine archivierten Chats.</p>
                            <ul class="more-list" tal:condition="archived_chats">
                                <li tal:repeat="chat archived_chats">
                                    <a class="list-link" href="#">
                                        <span class="list-title">${chat.customer_name}</span>
                                    </a>
                                    <a href="#">
                                        <p class="list-lead preview">${layout.format_date(chat.last_change, 'datetime_short')}</p>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </tal:b>
</div>
