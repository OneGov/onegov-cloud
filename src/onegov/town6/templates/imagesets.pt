<div metal:use-macro="layout.base" i18n:domain="onegov.town6">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <p tal:condition="not:imagesets" i18n:translate="">No photo albums defined yet.</p>

        <div tal:condition="imagesets" class="with-lead grid-x grid-padding-x columns small-up-1 medium-up-2 large-up-3 subpage-cards">
            <div class="cell" tal:repeat="imageset imagesets">
                <a tal:attributes="href request.link(imageset)">
                    <div class="card">
                        <div class="grid-x columns small-up-2 image-card-grid">
                            <tal:b tal:repeat="image imageset.ordered_files">
                                <div tal:condition="repeat.image.number <= 4" class="cell">
                                    <tal:b tal:define="size getattr(image.reference, 'size', None)">
                                        <span tal:condition="not size">
                                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                            <span i18n:translate="">Cannot display</span> ${image.name}
                                        </span>
                                        <img tal:condition="size" src="${request.link(image)}" alt="${image.note}"
                                             tal:attributes="width size and size[0];
                                                             height size and size[1]" />
                                    </tal:b>
                                </div>
                            </tal:b>
                        </div>
                        <div class="card-section">
                            <h5>${imageset.title}</h5><metal:hint use-macro="layout.macros['access_hint']" tal:define="item imageset" />
                            <div class="imageset-date">${layout.format_date(imageset.created, 'date')}</div>
                            <div class="list-lead">${imageset.meta.get('lead')}</div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </tal:b>
</div>
