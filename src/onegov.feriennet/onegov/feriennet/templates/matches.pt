<div metal:use-macro="layout.base" i18n:domain="onegov.feriennet">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <tal:block repeat="oid occasions">
            <div tal:define="records occasions[oid]" class="matched-occasion matched-state-${records['state']}">
                <h3>${records['first'].activity_title}</h3>
                <span>${layout.format_datetime_range(
                    layout.to_timezone(
                        records['first'].occasion_start,
                        records['first'].occasion_timezone
                    ),
                    layout.to_timezone(
                        records['first'].occasion_end,
                        records['first'].occasion_timezone
                    ),
                )}</span>

                <h4 i18n:translate>Accepted Bookings</h4>
                <tal:block condition="not:records['accepted']" i18n:translate>
                    No accepted bookings.
                </tal:block>

                <table class="matches" tal:condition="records['accepted']">
                    <thead>
                        <tr>
                            <th i18n:translate>Name</th>
                            <th i18n:translate>Age</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="record records['accepted']">
                            <td>
                                <i class="fa fa-star-o" aria-hidden="true"></i>
                                ${record.attendee_name}
                            </td>
                            <td>${record.attendee_age}</td>
                            <td>${record.booking_state}</td>
                        </tr>
                    </tbody>
                </table>

                <h4 i18n:translate>Other Bookings</h4>
                <tal:block condition="not:records['other']" i18n:translate>
                    No other bookings.
                </tal:block>

                <table class="matches" tal:condition="records['other']">
                    <thead>
                        <tr>
                            <th i18n:translate>Name</th>
                            <th i18n:translate>Age</th>
                            <th i18n:translate>State</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="record records['other']">
                            <td>
                                <i class="fa fa-star-o" aria-hidden="true"></i>
                                ${record.attendee_name}
                            </td>
                            <td>${int(record.attendee_age)}</td>
                            <td>${record.booking_state}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </tal:block>
    </tal:block>
</div>
