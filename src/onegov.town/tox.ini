[tox]
envlist = py27,py33,py34,pep8

[base]
dependencies = git+git://github.com/morepath/more.itsdangerous.git#egg=more.itsdangerous
               git+git://github.com/morepath/more.webassets.git#egg=more.webassets
               git+git://github.com/OneGov/onegov.server.git#egg=onegov.server
               git+git://github.com/OneGov/onegov.core.git#egg=onegov.core
               git+git://github.com/OneGov/onegov.page.git#egg=onegov.page
               git+git://github.com/OneGov/onegov.form.git#egg=onegov.form
               git+git://github.com/OneGov/onegov.user.git#egg=onegov.user
               git+git://github.com/OneGov/onegov.foundation.git#egg=onegov.foundation
               git+git://github.com/morepath/morepath.git#egg=morepath

[testenv]
deps = {[base]dependencies}
      -e{toxinidir}[test]

install_command = pip install {opts} {packages}

commands = py.test -s --cov onegov.user {posargs}

[testenv:pep8]
basepython = python2
deps = {[base]dependencies}
       flake8
commands = flake8

[flake8]
# E712 warns of 'x == None' which is often needed when using SqlAlchemy
# E712 warns of 'x == True' which is often needed when using SqlAlchemy
ignore = E711,E712,
exclude = .venv,.git,.tox,dist,docs,*lib/python*,*egg,build
