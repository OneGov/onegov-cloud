<div metal:use-macro="layout.base" i18n:domain="onegov.town">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <p tal:condition="not:forms" i18n:translate="">No forms defined yet.</p>

        <ul tal:condition="forms" class="form-definitions">
            <li tal:repeat="form forms">
                <a class="form-definition-title" tal:attributes="href request.link(form)">${form.title}</a>
                <div class="form-definition-lead">${form.meta.get('lead')}</div>
                <tal:block condition="request.is_logged_in">
                    <div class="form-definition-info ${form.type == 'builtin' and 'builtin-form' or 'custom-form'}">
                        <tal:block condition="form.type == 'builtin'">
                            <span i18n:translate="">Builtin Form</span>
                        </tal:block>
                        <tal:block condition="form.type == 'custom'">
                            <span i18n:translate="">Custom Form</span>
                        </tal:block>
                    </div>
                    <div class="form-definition-info ${form.submissions_count and 'has-submissions' or 'no-submissions'}">
                        <a href="${request.link(get_submissions_collection(form.name))}" 
                           tal:condition="form.submissions_count == 1">
                            <span>${form.submissions_count}</span> <span i18n:translate="">Submission</span>
                        </a>
                        <a href="${request.link(get_submissions_collection(form.name))}"
                           tal:condition="form.submissions_count > 1">
                            <span>${form.submissions_count}</span> <span i18n:translate="">Submissions</span>
                        </a>
                        <span tal:condition="not:form.submissions_count">
                            <span>${form.submissions_count}</span> <span i18n:translate="">Submissions</span>
                        </span>
                    </div>
                </tal:block>
            </li>
        </ul>
    </tal:block>
</div>