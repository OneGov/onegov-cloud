<div metal:use-macro="layout.base" i18n:domain="onegov.town">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <div class="row" tal:condition="not:completable">
            <div class="small-12 medium-7 large-5 columns">
                <div metal:use-macro="layout.macros['form']" />
            </div>
        </div>
        <div class="row fieldset-display" tal:condition="completable">
            <div class="small-12 medium-12 large-12 columns">
                <div class="panel">
                    <p i18n:translate="">
                        Your form submission is ready to be sent to the town.
                        Please review your data and press "Complete" to finalize the process.
                        If there's anything you'd like to change, click on "Edit" to return
                        to the filled-out form.
                    </p>
                </div>
                <div tal:repeat="fieldset form.fieldsets">
                    <tal:block define="fields fieldset.non_empty_fields" condition="fields">
                        <h2 tal:condition="fieldset.is_visible">${fieldset.label}</h2>
                        <div class="field-display" tal:repeat="field fields.values()">
                            <tal:block define="rendered render_field(field)" condition="rendered">
                                <div class="field-display-label">${field.label.text}</div>
                                <div class="field-display-data">
                                    <tal:block replace="structure render_field(field)" />
                                </div>
                            </tal:block>
                        </div>
                    </tal:block>
                </div>
            </div>
        </div>
        <div class="row fieldset-display-submit" tal:condition="completable">
            <div class="small-12 columns">
                <form action="${complete_link}" method="POST">
                    <input type="submit" value="Complete" class="button" i18n:attributes="value">
                </form>
                <a href="${edit_link}" class="button secondary" i18n:translate="">Edit</a>
            </div>
        </div>
    </tal:block>
</div>