<div metal:use-macro="layout.base" i18n:domain="onegov.town">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <div class="row">
            <div class="columns small-12 medium-8">
                <form class="searchbox" action="${request.link(model)}" method="GET">
                    <div class="row collapse">
                        <label>${searchlabel}</label>
                        <div class="columns small-11">
                            <input type="text" name="q" value="${model.query}" autofocus/>
                        </div>
                        <div class="columns small-1">
                            <input class="button postfix" type="submit" alt="Search" value="&#xf002" i18n:attributes="alt" />
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <tal:block condition="model.query">
            <h2 i18n:translate>${resultslabel}</h2>
            <div class="row">
                <div class="columns medium-8 small-12">
                    <p tal:condition="not: model.batch.hits.total" i18n:translate="">Your search returned no results.</p>

                    <ul tal:repeat="result model.batch.load()">
                        <li>
                            <a href="${request.link(result)}">${result.title}</a>
                            <p>${result.lead}</p>
                        </li>
                    </ul>

                    <div class="pagination-centered">
                        <div metal:use-macro="layout.macros['pagination']" tal:define="
                        collection model; current_page model;" />
                    </div>
                </div>
            </div>
        </tal:block>
    </tal:block>
</div>
