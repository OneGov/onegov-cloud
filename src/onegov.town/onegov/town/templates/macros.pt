<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="onegov.town">
<body>

<metal:navigation define-macro="top_navigation">
    <nav class="top-bar" data-topbar role="navigation" tal:condition="layout.top_navigation">
        <ul class="title-area">
            <!--! this section needs to be included (even though it's empty),
            or the responsive menu bar icon won't be rendered -->
            <li class="name" style="width: 0;"></li>
            <li class="toggle-topbar menu-icon">
                <a href="#"><span>Menu</span></a>
            </li>
        </ul>
        <section class="top-bar-section">
            <ul class="left">
                <tal:block repeat="link layout.top_navigation">
                    <li>
                        <a tal:attributes="href link.url">${link.text}</a>
                    </li>
                </tal:block>
            </ul>
        </section>
    </nav>
</metal:navigation>

<metal:breadcrumbs define-macro="breadcrumbs">
    <ul class="breadcrumbs" tal:condition="layout.breadcrumbs">
        <tal:block repeat="link layout.breadcrumbs">
            <li tal:attributes="class repeat.link.end and 'current' or ''"
                tal:content="structure link(request)">
            </li>
        </tal:block>
    </ul>
</metal:breadcrumbs>

<metal:bottom_links define-macro="bottom-links">
    <ul class="bottom-links" tal:condition="layout.bottom_links">
        <tal:block repeat="link layout.bottom_links">
            <tal:block replace="structure link(request)"/>
        </tal:block>
    </ul>
</metal:bottom_links>

<metal:search define-macro="form">
    <form tal:attributes="action form.action|'.'" method="POST">
        <metal:fields use-macro="layout.macros['fields']" tal:define="fields form._fields.values()" />
        <input type="submit" value="Submit" class="button" i18n:attributes="value">
    </form>
</metal:search>

<metal:fields define-macro="fields">
    <tal:block repeat="field fields">
        <div class="row"><div class="large-12 columns">
        <tal:block define="input_type field.widget.input_type|None">
            <tal:block condition="input_type == 'hidden'">
                ${field()}
                <small class="error" tal:repeat="error field.errors">${error}</small>
            </tal:block>
            <tal:block condition="input_type != 'hidden'">
                <label tal:attributes="class field.errors and 'error' or None">
                    <tal:block>${field.label.text}</tal:block> ${field()}
                </label>
                <small class="error" tal:repeat="error field.errors">${error}</small>
            </tal:block>
        </tal:block>
    </div></div>
    </tal:block>
</metal:fields>

<metal:dropzone define-macro="dropzone" i18n:domain="onegov.town">
    <form action="${layout.image_upload_url}"
          class="dropzone clearfix"
          method="POST"
          enctype="multipart/form-data">
        <div class="dz-message" i18n:translate="">
            Drop files to upload
        </div>

        <!--! Fallback if javascript is not available -->
        <div class="fallback">
            <input name="file" type="file" multiple />
            <input type="submit" value="Submit" class="button" i18n:attributes="value">
        </div>
    </form>
</metal:dropzone>

</body>