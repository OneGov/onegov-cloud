<div metal:use-macro="layout.base" i18n:domain="onegov.town">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <tal:block condition="page.trait == 'page'">
            <div class="row" tal:condition="page.content.get('lead') or page.content.get('text')">
                <div class="small-12 columns end">
                    <em class="page-lead" tal:condition="page.content.lead|nothing" 
                        tal:content="page.content.lead">
                    </em>
                    <div class="page-content" tal:condition="page.content.text|nothing"
                        tal:content="structure: page.content.text">
                    </div>
                </div>
            </div>
            <div class="row" tal:condition="children">
                <div class="small-12 columns">
                    <ul class="inline-list page-links">
                        <li tal:repeat="link children">
                            <a href="${link.url}">${link.text}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </tal:block>
        <tal:block condition="page.trait == 'news'">
            <div class="row" tal:condition="children">
                <div class="small-12 columns">
                    <div metal:use-macro="layout.macros.newslist" tal:define="news children" />
                </div>
            </div>
            <div class="row" tal:condition="not:children">
                <tal:block condition="page.content.get('lead') or page.content.get('text')">
                    <div class="small-12 columns end">
                        <em class="page-lead" tal:condition="page.content.lead|nothing" 
                            tal:content="page.content.lead">
                        </em>
                        <div class="page-content" tal:condition="page.content.text|nothing"
                            tal:content="structure: page.content.text">
                        </div>
                    </div>
                </tal:block>
            </div>
        </tal:block>
        <tal:block condition="page.trait == 'link'">
            <div class="row">
                <div class="small-12 columns">
                    <div class="panel">
                        <p i18n:translate>
                        You've reached this site because you are logged in. Visitors
                        are automatically redirected to the following link:
                        </p>
                        <p>
                            <a href="${page.content.url}">${page.content.url}</a>
                        </p>
                        <p i18n:translate>
                            You are not automatically redirected so you have a chance
                            to edit or delete this link.
                        </p>
                    </div>
                </div>
            </div>
        </tal:block>
    </tal:block>
</div>