<div metal:use-macro="layout.base" i18n:domain="onegov.election_day">
    <tal:block metal:fill-slot="title">${election.title}</tal:block>
    <tal:block metal:fill-slot="before-content">
        <div metal:use-macro="layout.macros['election_header']" />
    </tal:block>
    <tal:block metal:fill-slot="content">

        <div metal:use-macro="layout.macros['status_callout']" tal:define="item election" />

        <tal:block tal:condition="layout.visible()">

            <h2 i18n:translate="">Results</h2>

            <div metal:use-macro="layout.macros['election_factoids']" />

            <div metal:use-macro="layout.macros['tab_menu']"/>

            <h3 tal:content="layout.title()" />

            <table class="ballot-results stackable sortable">
                <thead>
                    <tr>
                        <th i18n:translate="" class="left-aligned">${layout.principal.label('entity')}</th>
                        <th i18n:translate="" class="left-aligned" tal:condition="layout.principal.has_districts">${layout.principal.label('district')}</th>
                        <th i18n:translate="" class="right-aligned">eligible Voters</th>
                        <th i18n:translate="" class="right-aligned">Received Ballots</th>
                        <th i18n:translate="" class="right-aligned">Accounted Ballots</th>
                        <th i18n:translate="" class="right-aligned">Blank Ballots</th>
                        <th i18n:translate="" class="right-aligned">Invalid Ballots</th>
                        <th i18n:translate="" class="right-aligned">Accounted Votes</th>
                        <th i18n:translate="" class="right-aligned" tal:condition="election.completed">Turnout</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="total static" tal:condition="layout.summarize">
                        <td i18n:translate="">Total</td>
                        <td tal:condition="layout.principal.has_districts"></td>
                        <td class="right-aligned">${layout.format_number(election.eligible_voters)}</td>
                        <td class="right-aligned">${layout.format_number(election.received_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.accounted_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.blank_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.invalid_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.accounted_votes)}</td>
                        <td class="right-aligned" tal:condition="election.completed">${'{0:.2f}'.format(election.turnout)} %</td>
                    </tr>
                    <tr tal:repeat="result election.results">
                        <tal:block condition="not: result.counted">
                            <td>${layout.format_name(result)}</td>
                            <td tal:condition="layout.principal.has_districts">${result.district}</td>
                            <td class="answer" colspan="7" i18n:translate="">Not yet counted.</td>
                        </tal:block>
                        <tal:block condition="result.counted">
                            <td>${layout.format_name(result)}</td>
                            <td tal:condition="layout.principal.has_districts">${result.district}</td>
                            <td class="right-aligned">${layout.format_number(result.eligible_voters)}</td>
                            <td class="right-aligned">${layout.format_number(result.received_ballots)}</td>
                            <td class="right-aligned">${layout.format_number(result.accounted_ballots)}</td>
                            <td class="right-aligned">${layout.format_number(result.blank_ballots)}</td>
                            <td class="right-aligned">${layout.format_number(result.invalid_ballots)}</td>
                            <td class="right-aligned">${layout.format_number(result.accounted_votes)}</td>
                            <td class="right-aligned" tal:condition="election.completed">${'{0:.2f}'.format(result.turnout)} %</td>
                        </tal:block>
                    </tr>
                    <tr class="total static" tal:condition="layout.summarize">
                        <td i18n:translate="">Total</td>
                        <td tal:condition="layout.principal.has_districts"></td>
                        <td class="right-aligned">${layout.format_number(election.eligible_voters)}</td>
                        <td class="right-aligned">${layout.format_number(election.received_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.accounted_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.blank_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.invalid_ballots)}</td>
                        <td class="right-aligned">${layout.format_number(election.accounted_votes)}</td>
                        <td class="right-aligned" tal:condition="election.completed">${'{0:.2f}'.format(election.turnout)} %</td>
                    </tr>
                </tbody>
            </table>

        </tal:block>

        <div metal:use-macro="layout.macros['related_link']" tal:define="meta election.meta" />

    </tal:block>
</div>
