<div metal:use-macro="layout.base" i18n:domain="onegov.election_day">
    <tal:block metal:fill-slot="before-content">
        <h1>
            <small>${layout.app.principal.name}</small>
            <tal:block i18n:translate="">Elections &amp; Votes: Open Data</tal:block>
        </h1>

        <hr />
    </tal:block>

    <tal:block metal:fill-slot="content">
        <div class="open-data">

            <h2 i18n:translate>Contents</h2>
            <ol id="toc">
                <li><a i18n:translate href="#summary">Summarized results</a></li>
                <li><a i18n:translate href="#election">Election results</a></li>
                <li><a i18n:translate href="#vote">Vote results</a></li>
            </ol>

            <h2 i18n:translate id="summary">Summarized results</h2>

            <dl class="url">
                <dt>URL (latest)</dt>
                <dd><code>/json</code></dd>

                <dt>URL (archive by year)</dt>
                <dd><code>/archive/{year}/json</code></dd>

                <dt>URL (archive by date)</dt>
                <dd><code>/archive/{year}-{month}-{day}/json</code></dd>
            </dl>

            <p i18n:translate>
                The summarized results displayed at the home page (only the results
                of latest votes and elections) and the archive (browsable by year
                or date) is also available as JSON. The data contains
                some global informations and for every election and vote the
                following commong information:
            </p>

            <dl>
                <dt>type</dt>
                <dd i18n:translate><code i18n:name='election'>election</code> for elections, <code i18n:name='vote'>vote</code> for votes.</dd>

                <dt>title</dt>
                <dd i18n:translate>An object containing the translated titles.</dd>

                <dt>date</dt>
                <dd i18n:translate>The date (ISO 8601).</dd>

                <dt>domain</dt>
                <dd i18n:translate>The domain of influence (federation, canton, ...).</dd>

                <dt>url</dt>
                <dd i18n:translate>A link to the detailed view.</dd>

                <dt>data_url</dt>
                <dd i18n:translate>A link to the detailed JSON data, see below.</dd>

                <dt>progess</dt>
                <dd i18n:translate>An object containing the number already counted municipalities (<code i18n:name='counted'>counted</code>) and the total number of municipalities (<code i18n:name='total'>total</code>).</dd>
            </dl>

            <p i18n:translate>Vote results contain the following additional information:</p>

            <dl>
                <dt>answer</dt>
                <dd i18n:translate>The answer of the vote: <code  i18n:name='accepted'>accepted</code>, <code  i18n:name='rejected'>rejected</code>, <code  i18n:name='proposal'>proposal</code> or <code  i18n:name='counter-proposal'>counter-proposal</code>.</dd>

                <dt>yeas_percentage</dt>
                <dd i18n:translate>Yeas percentage.</dd>

                <dt>nays_percentage</dt>
                <dd i18n:translate>Nays percentage.</dd>

            </dl>

            <h2 i18n:translate id="election">Election results</h2>

            <dl class="url">
                <dt>URL</dt>
                <dd><code>/election/{id}/{format}</code></dd>
            </dl>

            <p i18n:translate>The raw data used to display the results of votes is available in the following formats:</p>

            <ul>
                <li>JSON (<code>/json</code>)</li>
                <li>CSV (<code>/csv</code>)</li>
                <li>XLSX (<code>/xlsx</code>)</li>
            </ul>

            <p i18n:translate>The following fields are included in all formats:</p>

            <dl>
                <dt>election_title</dt>
                <dd i18n:translate>Title of the election.</dd>

                <dt>election_date</dt>
                <dd i18n:translate>The date of the election (an ISO 8601 date string).</dd>

                <dt>election_type</dt>
                <dd i18n:translate>"proporz" for proportional, "majorz" for majority system.</dd>

                <dt>election_mandates</dt>
                <dd i18n:translate>The number of mandates.</dd>

                <dt>election_absolute_majority</dt>
                <dd i18n:translate>The absolute majority. Only relevant for elections based on majority system.</dd>

                <dt>election_counted_municipalities</dt>
                <dd i18n:translate>The number of already counted municipalities.</dd>

                <dt>election_total_municipalities</dt>
                <dd i18n:translate>The total number of municipalities.</dd>

                <dt>municipality_name</dt>
                <dd i18n:translate>The name of the municipality.</dd>

                <dt>municipality_bfs_number</dt>
                <dd i18n:translate>The id of the municipality/locale ("BFS Nummer").</dd>

                <dt>municipality_elegible_voters</dt>
                <dd i18n:translate>The number of people eligible to vote for this municipality.</dd>

                <dt>municipality_received_ballots</dt>
                <dd i18n:translate>The number of received ballots for this municipality.</dd>

                <dt>municipality_blank_ballots</dt>
                <dd i18n:translate>The number of blank ballots for this municipality.</dd>

                <dt>municipality_invalid_ballots</dt>
                <dd i18n:translate>The number of invalid ballots for this municipality.</dd>

                <dt>municipality_unaccounted_ballots</dt>
                <dd i18n:translate>The number of unaccounted ballots for this municipality.</dd>

                <dt>municipality_accounted_ballots</dt>
                <dd i18n:translate>The number of accounted ballots for this municipality.</dd>

                <dt>municipality_blank_votes</dt>
                <dd i18n:translate>The number of blank votes for this municipality.</dd>

                <dt>municipality_invalid_votes</dt>
                <dd i18n:translate>
                    The number of invalid votes for this municipality.
                    Zero for elections based on proportional representation.
                </dd>

                <dt>municipality_accounted_votes</dt>
                <dd i18n:translate>The number of accounted votes for this municipality.</dd>

                <dt>list_name</dt>
                <dd i18n:translate>
                    The name of the list this candidate appears on.
                    Only relevant for elections based on proportional representation.
                </dd>

                <dt>list_id</dt>
                <dd i18n:translate>
                    The id of the list this candidate appears on. Only relevant for
                    elections based on proportional representation.
                </dd>

                <dt>list_number_of_mandates</dt>
                <dd i18n:translate>
                    The number of mandates this list has got. Only relevant for
                    elections based on proportional representation.
                </dd>

                <dt>list_votes</dt>
                <dd i18n:translate>
                    The number of votes this list has got.
                    Only relevant for elections based on proportional representation.
                </dd>

                <dt>list_connection</dt>
                <dd i18n:translate>
                    The ID of the list connection this list is connected to.
                    Only relevant for elections based on proportional representation.
                </dd>

                <dt>list_connection_parent</dt>
                <dd i18n:translate>
                    The ID of the parent list connection this list is connected to.
                    Only relevant for elections based on proportional representation.
                </dd>

                <dt>candidate_family_name</dt>
                <dd i18n:translate>The family name of the candidate.</dd>

                <dt>candidate_first_name</dt>
                <dd i18n:translate>The first name of the candidate.</dd>

                <dt>candidate_id</dt>
                <dd i18n:translate>The ID of the candidate.</dd>

                <dt>candidate_elected</dt>
                <dd i18n:translate>True if the candidate has been elected.</dd>

                <dt>candidate_votes</dt>
                <dd i18n:translate>The number of votes this candidate got.</dd>
            </dl>

            <h2 i18n:translate id="vote">Vote results</h2>

            <dl class="url">
                <dt>URL</dt>
                <dd><code>/vote/{id}/{format}</code></dd>
            </dl>

            <p i18n:translate>The raw data used to display the results of votes is available in the following formats:</p>

            <ul>
                <li>JSON (<code>/json</code>)</li>
                <li>CSV (<code>/csv</code>)</li>
                <li>XLSX (<code>/xlsx</code>)</li>
            </ul>

            <p i18n:translate>The following fields are included in all formats:</p>

            <dl>
                <dt>title</dt>
                <dd i18n:translate>Title of the vote.</dd>

                <dt>date</dt>
                <dd i18n:translate>The date of the vote (an ISO 8601 date string).</dd>

                <dt>shortcode</dt>
                <dd i18n:translate>Internal shortcode (defines the ordering of votes on the same day).</dd>

                <dt>domain</dt>
                <dd i18n:translate>"federation" for federal, "canton" for cantonal votes.</dd>

                <dt>type</dt>
                <dd i18n:translate>"proposal" (Vorschlag), "counter-proposal" (Gegenvorschlag) or "tie-breaker" (Stichfrage).</dd>

                <dt>group</dt>
                <dd i18n:translate>The designation of the result. May be the district, the town's name divided by a slash, the city's name and the city's district divided by a slash or simply the town's name. This
                depends entirely on the canton.</dd>

                <dt>municipality_id</dt>
                <dd i18n:translate>The id of the municipality/locale. Better known as "BFS Nummer"</dd>

                <dt>counted</dt>
                <dd i18n:translate>True if the result was counted, False if the result not known yet (the voting counts are not final yet).</dd>

                <dt>yeas</dt>
                <dd i18n:translate>The number of yes votes.</dd>

                <dt>nays</dt>
                <dd i18n:translate>The number of no votes.</dd>

                <dt>invalid</dt>
                <dd i18n:translate>The number of invalid votes.</dd>

                <dt>empty</dt>
                <dd i18n:translate>The number of empty votes.</dd>

                <dt>elegible_voters</dt>
                <dd i18n:translate>The number of people elegible to vote.</dd>
            </dl>
        </div>

        <div metal:use-macro="layout.macros['archive']" />
    </tal:block>
</div>
