<div metal:use-macro="layout.base" i18n:domain="onegov.election_day">
    <tal:block metal:fill-slot="content">
        <tal:block condition="not:votes_by_domain">
            <h2 i18n:translate="">There are no votes defined yet.</h2>
        </tal:block>
        <tal:block condition="votes_by_domain">
            <tal:block repeat="(domain, votes) votes_by_domain">
                <tal:block define="date votes[0].date">
                    <tal:block condition="domain == 'federation'">
                        <h2 i18n:translate="">
                            Federal Votes on <span tal:replace="layout.format_date(date, 'date')" i18n:name='date' />
                        </h2>
                    </tal:block>
                    <tal:block condition="domain == 'canton'">
                        <h2 i18n:translate="">
                            Cantonal Votes on <span tal:replace="layout.format_date(date, 'date')" i18n:name='date' />
                        </h2>
                    </tal:block>

                    <table>
                        <thead>
                            <tr>
                                <th i18n:translate="">Vote</th>
                                <th i18n:translate="">Result</th>
                                <th i18n:translate="">Yes %</th>
                                <th i18n:translate="">No %</th>
                                <th i18n:translate="">Reported</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr tal:repeat="vote votes">
                                <td><a href="${request.link(vote)}">${vote.title}</a></td>
                                <td>
                                    <span tal:condition="vote.answer == 'accepted'" class="accepted" i18n:translate="">
                                        Accepted
                                    </span>
                                    <span tal:condition="vote.answer == 'rejected'" class="rejected" i18n:translate="">
                                        Rejected
                                    </span>
                                    <span tal:condition="vote.answer == 'proposal'" class="accepted" i18n:translate="">
                                        Proposal
                                    </span>
                                    <span tal:condition="vote.answer == 'counter-proposal'" class="rejected" i18n:translate="">
                                        Counter Proposal
                                    </span>
                                </td>
                                <td>${'{0:.2f}'.format(vote.yays_percentage)}</td>
                                <td>${'{0:.2f}'.format(vote.nays_percentage)}</td>
                                <td tal:define="(counted, total) vote.progress" i18n:translate="">
                                    <span tal:replace="counted" i18n:name='counted' />
                                    of
                                    <span tal:replace="counted" i18n:name='total' />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </tal:block>
            </tal:block>
        </tal:block>
    </tal:block>
</div>