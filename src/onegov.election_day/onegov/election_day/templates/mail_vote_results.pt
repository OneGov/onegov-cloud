<div metal:use-macro="layout.base" i18n:domain="onegov.election_day">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="body">

        <h1>${model_title}</h1>

        <p tal:condition="not model.has_results" i18n:translate>No results yet</p>

        <dl tal:condition="model.has_results and not model.completed and model.type == 'simple'">

            <!--!
                Intermediate results, simple vote
            -->
            <h2 i18n:translate>Intermediate results</h2>

            <dt i18n:translate>Counted</dt>
            <dd><span metal:use-macro="layout.macros['progress']" tal:define="progress model.progress" /></dd>

            <dt i18n:translate>Yeas</dt>
            <dd>${'{0:.2f}'.format(model.proposal.yeas_percentage)}%</dd>

            <dt i18n:translate>Nays</dt>
            <dd>${'{0:.2f}'.format(model.proposal.nays_percentage)}%</dd>
        </dl>

        <dl tal:condition="model.has_results and not model.completed and model.type == 'complex'">

            <!--!
                Intermediate results, complex vote
            -->
            <h2 i18n:translate>Intermediate results</h2>

            <dt i18n:translate>Counted</dt>
            <dd><span metal:use-macro="layout.macros['progress']" tal:define="progress model.progress" /></dd>

            <dt i18n:translate>Proposal</dt>
            <dd>
                ${'{0:.2f}'.format(model.proposal.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                ${'{0:.2f}'.format(model.proposal.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
            </dd>

            <dt i18n:translate>Counter Proposal</dt>
            <dd>
                ${'{0:.2f}'.format(model.counter_proposal.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                ${'{0:.2f}'.format(model.counter_proposal.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
            </dd>

            <dt i18n:translate>Tie-Breaker</dt>
            <dd>
                ${'{0:.2f}'.format(model.tie_breaker.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                ${'{0:.2f}'.format(model.tie_breaker.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
            </dd>
        </dl>

        <tal:block tal:condition="model.has_results and model.completed and model.type == 'simple'">

            <!--!
                Final results, simple vote
            -->

            <h2><tal:block metal:use-macro="layout.macros['answer']" tal:define="answer model.answer"/></h2>
            <dl>
                <dt i18n:translate>Yeas</dt>
                <dd>${'{0:.2f}'.format(model.proposal.yeas_percentage)}%</dd>

                <dt i18n:translate>Nays</dt>
                <dd>${'{0:.2f}'.format(model.proposal.nays_percentage)}%</dd>

                <dt i18n:translate="turnout_vote">Voter turnout</dt>
                <dd>${'{0:.2f}'.format(model.turnout)} %</dd>
            </dl>
        </tal:block>

        <tal:block tal:condition="model.has_results and model.completed and model.type == 'complex'">

            <!--!
                Final results, complex vote
            -->

            <h2 tal:define="proposal model.proposal.accepted; counter_proposal model.counter_proposal.accepted; tie_breaker model.tie_breaker.accepted">
                <tal:block tal:condition="python: not proposal and not counter_proposal" i18n:translate>Proposal and counter proposal rejected</tal:block>
                <tal:block tal:condition="python: proposal and not counter_proposal" i18n:translate>Proposal accepted</tal:block>
                <tal:block tal:condition="python: not proposal and counter_proposal" i18n:translate>Counter proposal accepted</tal:block>
                <tal:block tal:condition="python: proposal and counter_proposal and tie_breaker" i18n:translate>Tie breaker in favor of the proposal</tal:block>
                <tal:block tal:condition="python: proposal and counter_proposal and not tie_breaker" i18n:translate>Tie breaker in favor of the counter proposal</tal:block>
            </h2>

            <dl>
                <dt i18n:translate>Proposal</dt>
                <dd>
                    ${'{0:.2f}'.format(model.proposal.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                    ${'{0:.2f}'.format(model.proposal.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
                </dd>

                <dt i18n:translate>Counter Proposal</dt>
                <dd>
                    ${'{0:.2f}'.format(model.counter_proposal.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                    ${'{0:.2f}'.format(model.counter_proposal.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
                </dd>

                <dt i18n:translate>Tie-Breaker</dt>
                <dd>
                    ${'{0:.2f}'.format(model.tie_breaker.yeas_percentage)}% <tal:block i18n:translate>Yeas</tal:block> /
                    ${'{0:.2f}'.format(model.tie_breaker.nays_percentage)}% <tal:block i18n:translate>Nays</tal:block>
                </dd>

                <dt i18n:translate="turnout_vote">Voter turnout</dt>
                <dd>${'{0:.2f}'.format(model.turnout)} %</dd>
            </dl>
        </tal:block>

        <p><a href="${model_url}" i18n:translate>View all details online</a></p>

    </tal:block>
    <tal:block metal:fill-slot="footer">
        <p><a href="${optout}" i18n:translate>Unsubscribe</a></p>
    </tal:block>
</div>
