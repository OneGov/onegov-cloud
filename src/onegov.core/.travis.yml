language: python
python: 3.4
env:
    - TOXENV=py34
    - TOXENV=pep8
install:
    - pip install tox==1.9.2
    - if [ "$TOXENV" = 'py34' ]; then pip install coveralls; fi
script:
    - tox -e $TOXENV
after_success:
    - if [ "$TOXENV" = 'py34' ]; then coveralls; fi
deploy:
    provider: pypi
    distributions: "sdist"
    user: seantis
    password:
      secure: OfF5P5BYhD4EVe8qoGAbXTkQhUAIB7StGa/uVEFRfEgY2JiaF/MMa+0udMx1atacUU3F7IDcm95r7yVpPH4nFKDrxqKrSgnlmsmxkCU2YTRyThQimos2c+/h1BL1h4oK+k7v98jCGDO4tzQoNG5HVIxasBuE5p7NKvGBlkDlwlI=
    on:
        tags: true
        condition: $TOXENV = py34
