<div metal:use-macro="layout.base" i18n:domain="onegov.agency">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <h2 i18n:translate>Agencies</h2>
        <p tal:condition="not:agencies" i18n:translate="">No hidden agencies.</p>
        <ul tal:condition="agencies" class="hidden-agencies">
            <li tal:repeat="agency agencies">
                <span tal:repeat="ancestor agency.ancestors">${ancestor.title}</span>
                <strong><a href="${request.link(agency)}">${agency.title}</a></strong>
            </li>
        </ul>

        <h2 i18n:translate>Memberships</h2>
        <p tal:condition="not:memberships" i18n:translate="">No hidden memberships.</p>
        <ul tal:condition="memberships" class="hidden-memberships">
            <li tal:repeat="membership memberships">
                <span tal:repeat="ancestor membership.agency.ancestors">${ancestor.title}</span>
                <span>${membership.agency.title}</span>
                <strong><a href="${request.link(membership)}">${membership.title}</a></strong>
            </li>
        </ul>

        <h2 i18n:translate>People</h2>
        <p tal:condition="not:people" i18n:translate="">No hidden people.</p>
        <ul tal:condition="people" class="hidden-people">
            <li tal:repeat="person people">
                <strong><a href="${request.link(person)}">${person.title}</a></strong>
                <ul tal:define="memberships person.memberships_by_agency" tal:condition="memberships">
                    <li tal:repeat="membership memberships">
                        <span tal:repeat="ancestor membership.agency.ancestors">${ancestor.title}</span>
                        <span>${membership.agency.title}</span>
                        <span class="last">${membership.title}</span>
                    </li>
                </ul>
            </li>
        </ul>
    </tal:block>
</div>
