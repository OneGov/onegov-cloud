<div metal:use-macro="layout.base" i18n:domain="onegov.org">
    <tal:block metal:fill-slot="title">
        ${title}
    </tal:block>
    <tal:block metal:fill-slot="content">
        <tal:block metal:use-macro="layout.macros.page_content"
             tal:define="lead imageset.meta.get('lead'); text None; people None; contact None; coordinates None;" />

        <p tal:condition="not:imageset.files" i18n:translate>
            This album does not contain any images yet.
        </p>

        <div tal:repeat="image imageset.files" tal:condition="imageset.view == 'full'" class="page-text full-imageset">
            <!--! the first three images are loaded conventionally, the rest are loaded lazily -->
            <p class="has-img" tal:condition="repeat.image.number <= 3">
                <img src="${request.link(image)}" alt="${image.note}" />
            </p>
            <p class="has-img" tal:condition="repeat.image.number > 3">
                <img data-src="${request.link(image)}" class="lazyload" alt="${image.note}" />
            </p>
        </div>

        <div tal:condition="imageset.view == 'grid'" class="page-text grid-imageset">
            <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-4">
                <li tal:repeat="image imageset.files" class="image-box">
                    <a href="${request.link(image)}">
                        <!--! the first eight images are loaded conventionally, the rest are loaded lazily -->
                        <img src="${request.link(image, 'thumbnail')}" alt="${image.note}" tal:condition="repeat.image.number <= 8" />
                        <img src="${request.link(image, 'thumbnail')}" alt="${image.note}" class="lazyload" tal:condition="repeat.image.number > 8" />
                    </a>
                </li>
            </ul>
        </div>
    </tal:block>
</div>
