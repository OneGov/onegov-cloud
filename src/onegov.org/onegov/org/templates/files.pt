<div metal:use-macro="layout.base" i18n:domain="onegov.org">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <div class="row">
            <div class="small-12 columns" tal:define="upload_url layout.file_upload_url">
                <h2 i18n:translate="">Upload</h2>
                <tal:block metal:use-macro="layout.macros.dropzone" />
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
                <h2 i18n:translate="">All Files</h2>

                <tal:b condition="not:count">
                    <p i18n:translate="">No files uploaded yet</p>
                </tal:b>

                <table tal:condition="count" class="files">
                    <thead>
                        <tr>
                            <th></th>
                            <th i18n:translate>Name</th>
                            <th i18n:translate>Upload date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tal:b repeat="(group, files) grouped">
                            <tr>
                                <th colspan="3" scope="colgroup">
                                    ${group}
                                </th>
                            </tr>

                            <tr id="${file.id}" tal:repeat="file files">
                                <td class="file-icon"></td>
                                <td class="file-link">
                                    ${structure: file(layout)}
                                </td>
                                <td class="file-date">
                                    ${format_date(file.upload_date)}
                                </td>
                            </tr>
                        </tal:b>
                    </tbody>
                </table>
            </div>
        </div>
    </tal:b>
</div>
