<div metal:use-macro="layout.base" i18n:domain="onegov.org">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content" define="confirm_migration migration and migration.possible">
        <tal:b condition="confirm_migration">
            <div class="panel callout">
                <p i18n:translate i18n:translate>
                Your edit requires a migration of existing entries. Please
                confirm the following changes:
                </p>
            </div>

            <ul>
                <li tal:repeat="field migration.changes.added_fields">
                    <tal:b i18n:translate>Added:</tal:b> ${field}
                </li>
                <li tal:repeat="field migration.changes.removed_fields">
                    <tal:b i18n:translate>Removed:</tal:b> ${field}
                </li>
                <li tal:repeat="(old, new) migration.changes.renamed_fields.items()|nothing">
                    <tal:b i18n:translate>Renamed:</tal:b> ${old} <i class="fa fa-caret-right" aria-hidden="true"></i> ${new}
                </li>
                <li tal:repeat="field migration.changes.changed_fields">
                    <tal:b i18n:translate>Changed:</tal:b> ${field}
                </li>
            </ul>

            <div class="button primary" onclick="$('#confirm-migration form').submit();" i18n:translate>
                Confirm
            </div>

            <div class="button secondary" onclick="window.history.back();" i18n:translate>
                Cancel
            </div>
        </tal:b>
        <div class="row" style="display: ${confirm_migration and 'none' or 'block'}">
            <div class="small-12 medium-8 large-6 columns" id="confirm-migration">
                <div metal:use-macro="layout.macros['form']" />
            </div>
        </div>
    </tal:b>
</div>