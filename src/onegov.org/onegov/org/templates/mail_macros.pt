<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="onegov.org">
<body>

<metal:reservations define-macro="reservations" i18n:domain="onegov.org">
    <tal:b condition="reservations">
        <tal:b repeat="reservation reservations">
            <tal:b define="start reservation.display_start(); end reservation.display_end()">
                <p>
                    <span>
                        ${layout.format_date(start, 'weekday_long')},
                        ${layout.format_date(start, 'date_long')}
                        <!--! simple whole day check: -->
                        <tal:b condition="start.time() != end.time()">
                        <br>
                            ${layout.format_time_range(start, end)}
                        </tal:b>
                    </span>
                    <br>
                    <span i18n:translate>Quota</span>: <span>
                        ${reservation.quota}
                    </span>
                </p>
            </tal:b>
        </tal:b>
    </tal:b>
</metal:reservations>

<metal:event define-macro="event" i18n:domain="onegov.org">
    <p><b>${model.title}</b></p>
    <p>${model.location}</p>
    <p>${model.organizer}</p>
    <p tal:condition="model.description" tal:content="structure model.description.replace('\n', '<br />')" />
    <p>
        <ul tal:define="occurrences model.occurrence_dates(localize=True)">
            <li tal:repeat="occurrence occurrences">${layout.format_date(occurrence, 'datetime')} - ${layout.format_date(model.localized_end, 'time')}</li>
        </ul>
    </p>
    <p tal:condition="model.tags">
        <ul><li tal:repeat="tag model.tags" i18n:translate="">${tag}</li></ul>
    </p>
</metal:event>

<metal:sender define-macro="sender" i18n:domain="onegov.org">
    <p i18n:translate>The OneGov Cloud Team</p>
</metal:sender>

<metal:display_form define-macro="display_form" i18n:domain="onegov.org">
    <p tal:condition="form" tal:repeat="fieldset form.fieldsets">
        <tal:b define="fields fieldset.non_empty_fields" condition="fields">
            <div class="fieldset" tal:condition="fieldset.is_visible">${fieldset.label}</div>
            <metal:b use-macro="layout.macros['display_fields']" tal:define="fields fields.values()">
        </tal:b>
    </p>
</metal:display_form>

<metal:display_field define-macro="display_fields" i18n:domain="onegov.org">
    <table class="field-display">
        <tal:b repeat="field fields">
            <tal:b define="rendered layout.render_field(field)|nothing" condition="rendered">
                <tr><td><b>${field.label.text}</b></td></tr>
                <tr><td><tal:b replace="structure rendered" /></td></tr>
                <tr><td height="5"></td></tr>
            </tal:b>
        </tal:b>
    </table>
</metal:display_field>

</body>
</html>
