#!/usr/bin/env bash
set -euo pipefail

# automatically open the log output group if there's an error
trap 'echo "^^^ +++"' ERR

echo "--- Installing prerequisites"
pip install flake8 flake8-bugbear bandit[toml]

echo "--- Linting"
flake8 src/ tests/

echo "--- Check security issues"
bandit --recursive --configfile pyproject.toml src/
